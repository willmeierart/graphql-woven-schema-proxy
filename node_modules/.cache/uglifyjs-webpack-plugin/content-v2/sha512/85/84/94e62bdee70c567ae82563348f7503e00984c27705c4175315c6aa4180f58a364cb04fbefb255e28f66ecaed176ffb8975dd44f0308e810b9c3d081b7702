{"code":"!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,\"__esModule\",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n.w={},n(n.s=15)}([function(e,t){e.exports=require(\"node-fetch\")},function(e,t){e.exports=require(\"object-assign\")},function(e,t,n){!function(){\"use strict\";var t=n(1),r=n(6),i={origin:\"*\",methods:\"GET,HEAD,PUT,PATCH,POST,DELETE\",preflightContinue:!1,optionsSuccessStatus:204};function o(e){return\"string\"==typeof e||e instanceof String}function a(e,t){var n,r=t.headers.origin,i=[];return e.origin&&\"*\"!==e.origin?o(e.origin)?(i.push([{key:\"Access-Control-Allow-Origin\",value:e.origin}]),i.push([{key:\"Vary\",value:\"Origin\"}])):(n=function e(t,n){if(Array.isArray(n)){for(var r=0;r<n.length;++r)if(e(t,n[r]))return!0;return!1}return o(n)?t===n:n instanceof RegExp?n.test(t):!!n}(r,e.origin),i.push([{key:\"Access-Control-Allow-Origin\",value:!!n&&r}]),i.push([{key:\"Vary\",value:\"Origin\"}])):i.push([{key:\"Access-Control-Allow-Origin\",value:\"*\"}]),i}function s(e){return!0===e.credentials?{key:\"Access-Control-Allow-Credentials\",value:\"true\"}:null}function u(e){var t=e.exposedHeaders;return t?(t.join&&(t=t.join(\",\")),t&&t.length?{key:\"Access-Control-Expose-Headers\",value:t}:null):null}function c(e,t){for(var n=0,i=e.length;n<i;n++){var o=e[n];o&&(Array.isArray(o)?c(o,t):\"Vary\"===o.key&&o.value?r(t,o.value):o.value&&t.setHeader(o.key,o.value))}}e.exports=function(e){var n=null;return n=\"function\"==typeof e?e:function(t,n){n(null,e)},function(e,r,o){n(e,function(n,f){if(n)o(n);else{var l=t({},i,f),p=null;l.origin&&\"function\"==typeof l.origin?p=l.origin:l.origin&&(p=function(e,t){t(null,l.origin)}),p?p(e.headers.origin,function(t,n){t||!n?o(t):(l.origin=n,function(e,t,n,r){var o=[];\"OPTIONS\"===(t.method&&t.method.toUpperCase&&t.method.toUpperCase())?(o.push(a(e,t)),o.push(s(e)),o.push(function(e){var t=e.methods;return t.join&&(t=e.methods.join(\",\")),{key:\"Access-Control-Allow-Methods\",value:t}}(e)),o.push(function(e,t){var n=e.allowedHeaders||e.headers,r=[];return n?n.join&&(n=n.join(\",\")):(n=t.headers[\"access-control-request-headers\"],r.push([{key:\"Vary\",value:\"Access-Control-Request-Headers\"}])),n&&n.length&&r.push([{key:\"Access-Control-Allow-Headers\",value:n}]),r}(e,t)),o.push(function(e){var t=e.maxAge&&e.maxAge.toString();return t&&t.length?{key:\"Access-Control-Max-Age\",value:t}:null}(e)),o.push(u(e)),c(o,n),e.preflightContinue?r():(n.statusCode=e.optionsSuccessStatus||i.optionsSuccessStatus,n.setHeader(\"Content-Length\",\"0\"),n.end())):(o.push(a(e,t)),o.push(s(e)),o.push(u(e)),c(o,n),r())}(l,e,r,o))}):o()}})}}}()},function(e,t){e.exports=require(\"apollo-server-express\")},function(e,t){e.exports=require(\"apollo-link-http\")},function(e,t){e.exports=require(\"apollo-fetch\")},function(e,t){e.exports=require(\"vary\")},function(e,t){e.exports=require(\"graphql-tools\")},function(e,t){e.exports=require(\"body-parser\")},function(e,t){e.exports=require(\"graphql\")},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(28);function o(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function a(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function s(e,t){var n={};for(var r in e){var i=e[r];t(i,r)&&(n[r]=i)}return n}function u(e){var t=[];return t.concat.apply(t,e)}function c(e,t,n){var r=e.slice(0,t),i=e.slice(t+1),o=f(void 0,t-r.length);return r.concat(o,[n],i)}function f(e,t){if(t<=0)return[];for(var n=new Array(t),r=0;r<t;r++)n[r]=e;return n}t.objectValues=function(e){return Object.keys(e).map(function(t){return e[t]})},t.objectEntries=o,t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.maybeDo=function(e,t){if(void 0!=e)return t(e)},t.arrayToObject=function(e,t){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];n[t(o)]=o}return n},t.objectFromKeys=function(e,t){for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];n[o]=t(o)}return n},t.objectFromKeyValuePairs=function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],a=i[1];t[o]=a}return t},t.objectToMap=function(e){return new Map(o(e))},t.mapValues=a,t.filterValues=s,t.filterValuesDeep=function e(t,n){return t instanceof Array?t.filter(n).map(function(t){return e(t,n)}):\"object\"==typeof t&&null!==t?a(s(t,n),function(t){return e(t,n)}):t},t.mapMapKeys=function(e,t){for(var n=new Map,r=0,i=Array.from(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n.set(t(a),s)}return n},t.mapMapValues=function(e,t){for(var n=new Map,r=0,i=Array.from(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n.set(a,t(s,a))}return n},t.flatten=u,t.flatMap=function(e,t){return u(e.map(t))},t.compact=function(e){return e.filter(function(e){return void 0!=e})},t.mapAndCompact=function(e,t){return e.map(t).filter(function(e){return void 0!=e})},t.throwError=function(e){if(i.isFunction(e))throw e();throw new Error(e)},t.groupBy=function(e,t){for(var n=new Map,r=0,i=e;r<i.length;r++){var o=i[r],a=t(o),s=n.get(a);s||(s=[],n.set(a,s)),s.push(o)}return n},t.intersect=function(e,t){var n=new Set(e);return t.filter(function(e){return n.has(e)})},t.bindNullable=function(e,t){return e?e.bind(t):e},t.divideArrayByPredicate=function(e,t){for(var n=[],r=[],i=0,o=e;i<o.length;i++){var a=o[i];t(a)?n.push(a):r.push(a)}return[n,r]},t.modifyPropertyAtPath=function e(t,n,o){if(!o.length)return n(t);var a=o[0],s=o.slice(1);if(\"number\"==typeof a&&a>=0){if(void 0==t&&(t=[]),i.isArray(t))return c(t,a,e(t[a],n,s));if(\"object\"!=typeof t)throw new TypeError(\"Expected array, but got \"+typeof t+\" while trying to replace property path \"+o)}if(void 0==t&&(t={}),\"object\"!=typeof t)throw new TypeError(\"Expected object, but got \"+typeof t+\" while trying to replace property path \"+o);var u,f=t[a];return r({},t,((u={})[a]=e(f,n,s),u))},t.replaceArrayItem=c,t.repeat=f,t.getOrSetFromMap=function(e,t,n){if(e.has(t))return e.get(t);var r=n();return e.set(t,r),r},t.isPromise=function(e){return\"object\"==typeof e&&null!==e&&\"function\"==typeof e.then}},function(e,t){e.exports=require(\"compression\")},function(e,t){e.exports=require(\"express\")},function(e,t){e.exports=require(\"babel-polyfill\")},function(e,t,n){\"use strict\";let r=(o=function*(){g.map(function(e){return new l.HttpLink({uri:e,fetch:a.default})});const e=yield(0,p.weaveSchemas)({endpoints:[{namespace:\"primary\",typePrefix:\"Primary\",url:m},{namespace:\"secondary\",typePrefix:\"Secondary\",url:v}]});y.use((0,c.default)({allow:\"*\"})),y.use(\"/graphql\",u.default.json(),(0,f.graphqlExpress)({schema:e})),y.post(\"/graphiql\",(0,f.graphiqlExpress)({endpointURL:\"/graphql\"})),y.listen(h,function(){console.log(`server running on ${h}`)})},i=function(){var e=o.apply(this,arguments);return new Promise(function(t,n){return function r(i,o){try{var a=e[i](o),s=a.value}catch(e){return void n(e)}if(!a.done)return Promise.resolve(s).then(function(e){r(\"next\",e)},function(e){r(\"throw\",e)});t(s)}(\"next\")})},function(){return i.apply(this,arguments)});var i,o;n(13);var a=d(n(0)),s=d(n(12)),u=(d(n(11)),d(n(8))),c=d(n(2)),f=n(3),l=(n(5),n(7),n(4)),p=n(69);function d(e){return e&&e.__esModule?e:{default:e}}process.browser||(global.fetch=a.default);const h=3010,y=(0,s.default)(),m=\"https://api.graphcms.com/simple/v1/cjfipt3m23x9i0190pgetwf8c\",v=\"https://api.graphcms.com/simple/v1/cjfipwwve7vl901427mf2vkog\",g=[m,v];try{r()}catch(e){console.log(e,e.message,e.stack)}},function(e,t,n){\"use strict\";const r=n(14);e.exports=r},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(9),o=n(10);function a(e,t,n,i){return r({kind:\"Field\",name:{kind:\"Name\",value:e}},t?{alias:{kind:\"Name\",value:t}}:{},n?{selectionSet:{kind:\"SelectionSet\",selections:n}}:{},i?{arguments:i}:{})}function s(e,t){if(!e.length&&!t)throw new Error(\"Either provide innermostSelectionSet or a non-empty fieldNodes array\");for(var n=t,i=0,o=Array.from(e).reverse();i<o.length;i++){var a=o[i];n={kind:\"SelectionSet\",selections:[r({},a,{selectionSet:n})]}}return n}function u(e){return e instanceof i.GraphQLList?{kind:\"ListType\",type:u(e.ofType)}:e instanceof i.GraphQLNonNull?{kind:\"NonNullType\",type:u(e.ofType)}:{kind:\"NamedType\",name:{kind:\"Name\",value:e.name}}}function c(e,t){return{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:e}},type:u(t)}}function f(e,t,n){return void 0===n&&(n={}),p(e.selections,t,n).length>0}function l(e,t){return void 0===t&&(t={}),o.flatMap(e,function(e){switch(e.kind){case\"Field\":return[e];case\"FragmentSpread\":return l(function(e){if(!(e in t))throw new Error(\"Fragment \"+e+\" is referenced but not defined\");return t[e]}(e.name.value).selectionSet.selections,t);case\"InlineFragment\":return l(e.selectionSet.selections,t);default:throw new Error(\"Unexpected node kind: \"+e.kind)}})}function p(e,t,n){return void 0===n&&(n={}),l(e,n).filter(function(e){return d(e)==t})}function d(e){return e.alias?e.alias.value:e.name.value}t.createFieldNode=a,t.createSelectionChain=function(e,t){return s(e.map(function(e){return a(e)}),t)},t.cloneSelectionChain=s,t.createTypeNode=u,t.createVariableDefinitionNode=c,t.createNestedArgumentWithVariableNode=function(e,t){var n=e.split(\".\"),r=n.shift();if(!r)throw new Error(\"Argument must not be empty\");for(var i={kind:\"Variable\",name:{kind:\"Name\",value:t}},o=0,a=n.reverse();o<a.length;o++)i={kind:\"ObjectValue\",fields:[{kind:\"ObjectField\",value:i,name:{kind:\"Name\",value:a[o]}}]};return{kind:\"Argument\",name:{kind:\"Name\",value:r},value:i}},t.addFieldSelectionSafely=function(e,t,n){void 0===n&&(n={});var i=e.selections.filter(function(e){return\"Field\"==e.kind&&e.name.value==t});if(i.length){var o=i[0];return{selectionSet:e,alias:o.alias?o.alias.value:o.name.value}}var a=t;if(f(e,a,n)){var s=0;do{a=t+\"\"+s,s++}while(f(e,a,n))}return{selectionSet:r({},e,{selections:e.selections.concat([r({kind:\"Field\",name:{kind:\"Name\",value:t}},a==t?{}:{alias:{kind:\"Name\",value:a}})])}),alias:a}},t.aliasExistsInSelection=f,t.expandSelections=l,t.findNodesByAliasInSelections=p,t.addVariableDefinitionSafely=function(e,t,n){var r=new Set(e.map(function(e){return e.variable.name.value})),i=t;if(r.has(t)){var o=0;do{i=t+o,o++}while(r.has(i))}return{variableDefinitions:e.concat([c(i,n)]),name:i}},t.renameTypes=function(e,t){return i.visit(e,{NamedType:function(e){return r({},e,{name:{kind:\"Name\",value:t(e.name.value)}})}})},t.collectFieldNodesInPath=function(e,t,n){if(void 0===n&&(n={}),!t.length)throw new Error(\"Aliases must not be empty\");for(var r=[e],i=[],a=function(e){if(!r.length)throw new Error(\"Expected field \"+(i.length?i[i.length-1].name.value:\"\")+\" to have sub-selection but it does not\");var t=o.flatMap(r,function(t){return p(t.selections,e,n)});if(!t.length)throw new Error(\"Field \"+e+\" expected but not found\");r=o.compact(t.map(function(e){return e.selectionSet})),i.push(t[0])},s=0,u=t;s<u.length;s++)a(u[s]);return i},t.getAliasOrName=d},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(57);t.transformSchema=r.transformSchema},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(e){void 0===e&&(e={}),this.fieldMetadata=new Map,this.fieldMetadata=e.fieldMetadata||this.fieldMetadata}return e.prototype.getFieldMetadata=function(t,n){return\"string\"!=typeof t&&(t=t.name),\"string\"!=typeof n&&(n=n.name),this.fieldMetadata.get(e.getFieldKey(t,n))},e.getFieldKey=function(e,t){return e+\".\"+t},e}();t.SchemaMetadata=i;var o=function(){function e(e,t){void 0===t&&(t=new i),this.schema=e,this.metadata=t}return e.prototype.getFieldMetadata=function(e,t){return this.metadata.getFieldMetadata(e,t)},e.prototype.withSchema=function(t){return new e(t,this.metadata)},e.prototype.withMetadata=function(t){return new e(this.schema,t)},e.prototype.withFieldMetadata=function(t){return new e(this.schema,new i(r({},this.metadata,{fieldMetadata:t})))},Object.defineProperty(e.prototype,\"fieldMetadata\",{get:function(){return this.metadata.fieldMetadata},enumerable:!0,configurable:!0}),e}();t.ExtendedSchema=o},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(e){function t(n,r,i){var o=e.call(this,n)||this;return o.endpoint=r,o.originalError=i,Object.setPrototypeOf(o,t.prototype),o}return i(t,e),Object.defineProperty(t.prototype,\"endpointName\",{get:function(){if(this.endpoint)return this.endpoint.namespace?this.endpoint.namespace:this.endpoint.url?this.endpoint.url:this.endpoint.identifier},enumerable:!0,configurable:!0}),t}(Error);t.WeavingError=o,t.throwingErrorConsumer=function(e){throw e}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(28);t.assertSuccessfulResult=function(e){if(r.isArray(e.errors)&&e.errors.length){if(1==e.errors.length)throw e.errors[0];throw new Error(e.errors.map(function(e){return function(e){return e.locations&&e.locations.length?\"GraphQL error at \"+e.locations.map(function(e){return\"line \"+e.line+\", column \"+e.column}).join(\" and \")+\":\\n\"+e.message:e.message}(e)}).join(\"\\n\\n\"))}if(\"error\"in e&&\"string\"==typeof e.error)throw new Error(e.error);if(!e.data)throw new Error(\"GraphQL endpoint did not report errors, but also did not provide a data result\");if(\"object\"!=typeof e.data)throw new Error(\"Data result of GraphQL response is not an object\");return e.data}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9);t.walkFields=function(e,t){for(var n,i=e,o=0,a=t;o<a.length;o++){var s=a[o];if(!(i instanceof r.GraphQLObjectType||i instanceof r.GraphQLInterfaceType))return;var u=i.getFields();if(!(s in u))return;i=(n=u[s]).type}return n},t.isListType=function(e){return r.getNullableType(e)instanceof r.GraphQLList},t.getNonNullType=function(e){return e instanceof r.GraphQLNonNull?e:new r.GraphQLNonNull(e)},t.isRootType=function(e,t){return e==t.getQueryType()||e==t.getMutationType()||e==t.getSubscriptionType()}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i=n(9),o=n(18),a=n(10);t.EXTENDED_INTROSPECTION_FIELD=\"_extIntrospection\",t.EXTENDED_INTROSPECTION_TYPE_NAMES={introspection:\"_ExtendedIntrospection\",type:\"_ExtendedType\",field:\"_ExtendedField\",fieldMetadata:\"_FieldMetadata\",fieldLink:\"_FieldLink\",fieldJoin:\"_FieldJoin\"},t.getExtendedIntrospectionType=function(){var e,n,o,a,s;return r||(e=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.fieldLink,description:\"Configuration of a link on a field. If this metadata is present, the consumer should replace the type of the field with the type of the linked field and, for the value of this field, fetch objects from the linked field according to this config\",fields:{field:{description:\"The field or a dot-separated list of fields starting from the query type that is used to resolve the link\",type:new i.GraphQLNonNull(i.GraphQLString)},batchMode:{description:\"If true, the field returns a list of objects instead of one object\",type:new i.GraphQLNonNull(i.GraphQLBoolean)},argument:{description:\"The argument name, optionally followed by a dot-separated path of input field names, that is to be set to the id (or list of ids in case of batchMode)\",type:new i.GraphQLNonNull(i.GraphQLString)},keyField:{description:\"The name of a field in the target type that contains the id. Only needed if batchMode is true and the field may return the objects out of order\",type:i.GraphQLString},linkFieldName:{description:\"If specified, a new field with this name will be added with the target type. If not specified, the annotated field will be replaced with the link field.\",type:i.GraphQLString},ignore:{description:\"Indicates that the link has already been processed.\",type:i.GraphQLBoolean}}}),n=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.fieldJoin,description:\"Configuration on how to join filters, ordering and limiting of a linked child field into this field\",fields:{linkField:{description:\"The name of the child field that has a link configured\",type:new i.GraphQLNonNull(i.GraphQLString)},ignore:{description:\"Indicates that the join has already been processed.\",type:i.GraphQLBoolean}}}),o=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.fieldMetadata,description:\"Metadata on a GraphQL field\",fields:{link:{description:\"Specifies if this field should be resolved as a link to a different field\",type:e},join:{description:\"Specifies if and how filters, ordering and limiting of a linked child field should be joined into this field\",type:n}}}),a=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.field,description:\"Extension of the field introspection type\",fields:{name:{description:\"The field name\",type:i.GraphQLString},metadata:{description:\"Additional metadata on this field\",type:o}}}),s=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.type,description:\"Extension of the type introspection type\",fields:{name:{description:\"The type name\",type:i.GraphQLString},fields:{description:\"A list of all fields of this type that have extended information\",type:new i.GraphQLNonNull(new i.GraphQLList(new i.GraphQLNonNull(a)))}}}),r=new i.GraphQLObjectType({name:t.EXTENDED_INTROSPECTION_TYPE_NAMES.introspection,description:\"Offers non-standard type information\",fields:{types:{description:\"A list of all types that have extended information\",type:new i.GraphQLNonNull(new i.GraphQLList(new i.GraphQLNonNull(s)))}}})),r},t.getExtendedIntrospectionData=function(e){var t=Array.from(e.fieldMetadata.keys());return{types:t.map(function(e){return e.split(\".\")[0]}).map(function(n){return{name:n,fields:t.filter(function(e){return e.startsWith(n+\".\")}).map(function(t){return{name:t.split(\".\",2)[1],metadata:e.fieldMetadata.get(t)}})}})}},t.buildSchemaMetadata=function(e){for(var t=new Map,n=0,r=e.types;n<r.length;n++)for(var i=r[n],s=0,u=i.fields;s<u.length;s++){var c=u[s],f=a.filterValuesDeep(c.metadata,function(e){return void 0!=e});t.set(i.name+\".\"+c.name,f)}return new o.SchemaMetadata({fieldMetadata:t})}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i=n(19);!function(e){e[e.THROW=0]=\"THROW\",e[e.CONTINUE=1]=\"CONTINUE\",e[e.CONTINUE_AND_REPORT_IN_SCHEMA=2]=\"CONTINUE_AND_REPORT_IN_SCHEMA\",e[e.CONTINUE_AND_ADD_PLACEHOLDERS=3]=\"CONTINUE_AND_ADD_PLACEHOLDERS\"}(r=t.WeavingErrorHandlingMode||(t.WeavingErrorHandlingMode={}));var o=r.THROW;t.shouldAddPlaceholdersOnError=function(e){return void 0===e&&(e=o),e==r.CONTINUE_AND_ADD_PLACEHOLDERS},t.shouldProvideErrorsInSchema=function(e){return void 0===e&&(e=o),e==r.CONTINUE_AND_REPORT_IN_SCHEMA||e==r.CONTINUE_AND_ADD_PLACEHOLDERS},t.shouldContinueOnError=function(e){return void 0===e&&(e=o),e!=r.THROW},t.nestErrorHandling=function(e,t,n){var r=[];function o(n){var r=t?t+\": \"+n.message:n.message;e(new i.WeavingError(r,n.endpoint,n))}try{n(function(e){return r.push(e)})}catch(e){if(!(e instanceof i.WeavingError))throw e;o(e)}r.forEach(o)}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(10),i=function(){function e(e,t){void 0===t&&(t=[]),this.originalValue=e,this.errors=t}return e.prototype.getError=function(){if(1==this.errors.length){var e=this.errors[0];return e.locations?e:new Error(this.errors[0].message)}return new Error(this.errors.map(function(e){return e.message}).join(\"\\n\\n\"))},e}();t.FieldErrorValue=i,t.moveErrorsToData=function(e,t){if(void 0===t&&(t=function(e){return e}),!e.errors||!e.errors.length)return e;for(var n=[],o=e.data,a=function(e){if(!e.path)return n.push(t(e)),\"continue\";o=r.modifyPropertyAtPath(o,function(n){return n instanceof i?(n.errors.push(t(e)),n):new i(n,[t(e)])},e.path)},s=0,u=e.errors;s<u.length;s++)a(u[s]);var c={data:o};return n.length&&(c.errors=n),c}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(9),o=n(10);function a(e){var t,n=f(e.fieldNodes,e.fragments),r={kind:\"SelectionSet\",selections:(t=e.fieldNodes,o.flatMap(t,function(e){return e.selectionSet?e.selectionSet.selections:[]}))},i=c(n.concat(e.fieldNodes));return{fragments:n,variableDefinitions:(e.operation.variableDefinitions||[]).filter(function(e){return i.has(e.variable.name.value)}),variableValues:p(e.variableValues,Array.from(i)),selectionSet:r,operation:e.operation.operation}}function s(e){var t=e.fragments,n=e.variableDefinitions,r=e.variableValues,i=e.selectionSet;return{document:{kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:e.operation,variableDefinitions:n,selectionSet:i}].concat(t)},variableValues:r}}function u(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var o=r[n];i.visit(o,{FragmentSpread:function(e){t.add(e.name.value)}})}return Array.from(t)}function c(e){for(var t=new Set,n=0,r=e;n<r.length;n++){var o=r[n];i.visit(o,{VariableDefinition:function(){return!1},Variable:function(e){t.add(e.name.value)}})}return t}function f(e,t){var n=[],r=new Set,i=!1;do{var o=l(t,u(e.concat(n)));i=!1;for(var a=0,s=o;a<s.length;a++){var c=s[a];r.has(c)||(r.add(c),n.push(c),i=!0)}}while(i);return n}function l(e,t){return t.map(function(t){return e[t]})}function p(e,t){for(var n={},r=0,i=t;r<i.length;r++){var o=i[r];n[o]=e[o]}return n}t.getFieldAsQueryParts=a,t.getFieldAsQuery=function(e){return s(a(e))},t.getQueryFromParts=s,t.collectUsedFragments=f,t.dropUnusedFragments=function(e){var t,n=o.divideArrayByPredicate(e.definitions,function(e){return\"FragmentDefinition\"==e.kind}),i=n[0],a=n[1],s=f(a,(t=i,o.arrayToObject(t,function(e){return e.name.value})));return r({},e,{definitions:a.concat(s)})},t.dropUnusedVariables=function(e){var t=o.divideArrayByPredicate(e.document.definitions,function(e){return\"OperationDefinition\"==e.kind}),n=t[0],i=t[1],a=c([e.document]);if(0==n.length)return e;if(n.length>1)throw new Error(\"Multiple operations not supported in dropUnusedVariables\");var s=n[0],u=r({},s,{variableDefinitions:s.variableDefinitions?s.variableDefinitions.filter(function(e){return a.has(e.variable.name.value)}):void 0}),f=p(e.variableValues,Array.from(a));return r({},e,{variableValues:f,document:r({},e.document,{definitions:i.concat([u])})})}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(18),a=n(17),s=n(9),u=n(10);t.transformExtendedSchema=function(e,t){var n,c=new Map,f=r({},(n=t,{transformScalarType:u.bindNullable(n.transformScalarType,n),transformEnumType:u.bindNullable(n.transformEnumType,n),transformInterfaceType:u.bindNullable(n.transformInterfaceType,n),transformInputObjectType:u.bindNullable(n.transformInputObjectType,n),transformUnionType:u.bindNullable(n.transformUnionType,n),transformObjectType:u.bindNullable(n.transformObjectType,n),transformDirective:u.bindNullable(n.transformDirective,n),transformField:u.bindNullable(n.transformField,n),transformInputField:u.bindNullable(n.transformInputField,n)}),{transformField:function(n,o){var a=o.oldOuterType;if(!(a instanceof s.GraphQLObjectType))return t.transformField?t.transformField(n,o):n;var u=r({},n,{metadata:e.getFieldMetadata(a,o.oldField)});return t.transformField&&(u=t.transformField(u,o)),u.metadata&&c.set(o.newOuterType.name+\".\"+u.name,u.metadata),u.metadata,i(u,[\"metadata\"])},transformFields:function(e,n){var o=u.maybeDo(t.transformFields,function(e){return e.bind(t)});if(!o)return e;if(!(n.oldOuterType instanceof s.GraphQLObjectType))return o(e,n);var a=o(u.mapValues(e,function(e,t){var i=n.newOuterType+\".\"+t,o=c.get(i);return c.delete(i),r({},e,{metadata:o})}),n);return u.mapValues(a,function(e,t){var r=e.metadata,o=i(e,[\"metadata\"]);if(r){var a=n.newOuterType+\".\"+t;c.set(a,r)}return o})}}),l=a.transformSchema(e.schema,f);return new o.ExtendedSchema(l,new o.SchemaMetadata({fieldMetadata:c}))}},function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(9),a=function(){function e(e){this.schema=e}return e.prototype.execute=function(e,t,n){return r(this,void 0,void 0,function(){var r,a;return i(this,function(i){switch(i.label){case 0:return[4,this.schema];case 1:return r=i.sent(),(a=o.validate(r,e)).length>0?[2,{errors:a}]:[3,2];case 2:return[4,o.execute(r,e,{},n,t)];case 3:return[2,i.sent()]}})})},e}();t.LocalGraphQLClient=a},function(e,t){e.exports=require(\"util\")},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(18),i=n(10),o=n(45);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Map(i.flatMap(e,function(e){return Array.from(e)}))}t.mergeExtendedSchemas=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=a.apply(void 0,e.map(function(e){return e.fieldMetadata}));return new r.ExtendedSchema(o.mergeSchemas(e.map(function(e){return e.schema})),new r.SchemaMetadata({fieldMetadata:n}))},t.mergeFieldMetadata=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9);t.prefixGraphQLErrorPath=function(e,t,n){if(!(e instanceof r.GraphQLError&&e.path))return e;var i=function e(t){return t?e(t.prev).concat([t.key]):[]}(t).concat(e.path.slice(n));return new r.GraphQLError(e.message,e.nodes,e.source,e.positions,i,e.originalError)}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,\"__esModule\",{value:!0});var s=n(9),u=n(26),c=n(10),f=n(50),l=n(49),p=n(21),d=n(25),h=n(16),y=n(19),m=n(48),v=n(23),g=function(){function e(e){this.moduleConfig=e}return e.prototype.transformExtendedSchema=function(e){this.unlinkedSchema=e;var t=new T(e,this.moduleConfig.reportError);return this.linkedSchema=u.transformExtendedSchema(e,t),this.transformationInfo=t.transformationInfo,this.linkedSchema},e.prototype.transformQuery=function(e){var t=this;if(!this.linkedSchema||!this.unlinkedSchema)throw new Error(\"Schema is not built yet\");if(!this.transformationInfo||this.transformationInfo.isEmpty())return e;var n=new s.TypeInfo(this.linkedSchema.schema),i=e.variableValues,o=e.document.definitions.filter(function(e){return\"OperationDefinition\"==e.kind})[0];if(!o)throw new Error(\"Operation not found\");var a=o.variableDefinitions||[],u=[],c=!1,f=s.visit(e.document,s.visitWithTypeInfo(n,{Field:{enter:function(e){var o=e,f=u[u.length-1],p={};u.push(p);var d=n.getParentType();if(!d)throw new Error(\"Failed to retrieve parent type for field \"+e.name.value);if(d instanceof s.GraphQLObjectType){if(!n.getFieldDef())throw new Error(\"Failed to retrieve field definition for field \"+e.name.value);var y=t.transformationInfo.getLinkTransformationInfo(d.name,n.getFieldDef().name);y&&y.linkConfig&&(f&&f.joinConfig&&f.joinConfig.linkField==e.name.value&&(f.isLinkFieldSelectedYet=!0),e=h.createFieldNode(y.sourceFieldName,h.getAliasOrName(e),void 0,e.arguments));var m,v,g=t.unlinkedSchema.getFieldMetadata(d,n.getFieldDef());if(g&&g.join){p.joinConfig=g.join,p.isLinkFieldSelectedYet=!1;var b=t.transformationInfo.getJoinTransformationInfo(d.name,n.getFieldDef().name);if(!b)return e;var w=!1,T=s.getNamedType(n.getType()),O=t.unlinkedSchema.getFieldMetadata(T,g.join.linkField);if(!O||!O.link)throw new Error(\"Failed to retrieve linkMetadata for join field \"+e.name.value+\" (looked up \"+n.getType()+\".\"+g.join.linkField+\")\");var E=O.link.linkFieldName||g.join.linkField,_=(e.arguments||[]).filter(function(e){return e.name.value==l.FILTER_ARG})[0],S=E;if(_){var k=b.leftFilterArgType;if(e=r({},e,{arguments:e.arguments.filter(function(e){return e!=_})}),k){var j=void 0;switch(_.value.kind){case\"Variable\":var N=i[_.value.name.value]||{};w=S in N;var P=r({},N,((m={})[S]=void 0,m)),F=h.addVariableDefinitionSafely(a,_.value.name.value,k),M=F.name,L=F.variableDefinitions;a=L,i=r({},i,((v={})[M]=P,v)),j={kind:\"Variable\",name:{kind:\"Name\",value:M}};break;case\"ObjectValue\":j=(w=_.value.fields.some(function(e){return e.name.value==S}))?r({kind:\"ObjectValue\"},_.value,{fields:_.value.fields.filter(function(e){return e.name.value!=S})}):_.value;break;case\"NullValue\":j=_.value;break;default:throw new Error(\"Invalid value for filter arg: \"+_.value.kind)}e=r({},e,{arguments:(e.arguments||[]).concat([{kind:\"Argument\",name:{kind:\"Name\",value:l.FILTER_ARG},value:j}])})}}var x=!1,I=(e.arguments||[]).filter(function(e){return e.name.value==l.ORDER_BY_ARG})[0];if(I){var A=void 0;switch(I.value.kind){case\"Variable\":A=i[I.value.name.value];break;case\"EnumValue\":A=I.value.value;break;case\"NullValue\":A=void 0;break;default:throw new Error(\"Invalid value for orderBy arg: \"+I.value.kind)}x=void 0!=A&&A.startsWith(E+\"_\");var Q=(e.arguments||[]).filter(function(e){return e!=I});A&&!x&&(Q=Q.concat([{kind:\"Argument\",name:{kind:\"Name\",value:l.ORDER_BY_ARG},value:{kind:\"EnumValue\",value:A}}])),e=r({},e,{arguments:Q})}e.arguments&&(x||w)&&(e=r({},e,{arguments:e.arguments.filter(function(e){return e.name.value!=l.FIRST_ARG})}))}return e!=o?(c=!0,e):void 0}},leave:function(e){var t=u.pop();if(t&&t.joinConfig&&!t.isLinkFieldSelectedYet)return c=!0,r({},e,{selectionSet:{kind:\"SelectionSet\",selections:(e.selectionSet?e.selectionSet.selections:[]).concat([h.createFieldNode(t.joinConfig.linkField,\"_joined\")])}})}}}));if(!c)return e;f=d.dropUnusedFragments(f);var p=r({},f.definitions.filter(function(e){return\"OperationDefinition\"==e.kind})[0],{variableDefinitions:a.length?a:void 0});return e=r({},e,{document:r({},f,{definitions:f.definitions.filter(function(e){return\"OperationDefinition\"!=e.kind}).concat([p])}),variableValues:i}),d.dropUnusedVariables(e)},e}();t.LinksModule=g;var b=function(){function e(){this.joinTransformationInfos=new Map,this.linkTransformationInfos=new Map}return e.prototype.getJoinTransformationInfo=function(e,t){return this.joinTransformationInfos.get(this.getJoinTransformationInfoKey(e,t))},e.prototype.setJoinTransformationInfo=function(e,t,n){this.joinTransformationInfos.set(this.getJoinTransformationInfoKey(e,t),n)},e.prototype.getJoinTransformationInfoKey=function(e,t){return e+\".\"+t},e.prototype.getLinkTransformationInfo=function(e,t){return this.linkTransformationInfos.get(this.getLinkTransformationInfoKey(e,t))},e.prototype.setLinkTransformationInfo=function(e,t,n){this.linkTransformationInfos.set(this.getLinkTransformationInfoKey(e,t),n)},e.prototype.getLinkTransformationInfoKey=function(e,t){return e+\".\"+t},e.prototype.isEmpty=function(){return 0==this.linkTransformationInfos.size&&0==this.joinTransformationInfos.size},e}(),w=function(){function e(e){Object.assign(this,e)}return e.prototype.toString=function(){return\"[ResolvedLinkObject]\"},e}(),T=function(){function e(e,t){this.schema=e,this.reportError=t,this.transformationInfo=new b,this.inputObjectTypeMap={}}return e.prototype.transformField=function(e,t){var n=this;if(e.metadata&&e.metadata.join&&!e.metadata.join.ignore){var r=e.metadata.join;v.nestErrorHandling(this.reportError,\"Error in @join config on \"+e.name,function(i){(e=n.transformJoinField(e,t,r,i)).metadata.join.ignore=!0})}return e},e.prototype.transformFields=function(e,t){for(var n=this,i={},o=function(e,o){var u=!1;if(o.metadata&&o.metadata.link&&!o.metadata.link.ignore){var c=o.metadata.link;v.nestErrorHandling(s.reportError,\"Error in @link config on \"+t.oldOuterType.name+\".\"+e,function(s){var f=n.transformLinkField(r({},o,{name:e}),t,c,s),l=f.name,p=a(f,[\"name\"]);l!=e&&(i[e]=r({},o,{metadata:r({},o.metadata,{link:r({},c,{ignore:!0})})})),i[l]=r({},p,{metadata:r({},p.metadata,{link:r({},c,{ignore:!0})})}),u=!0})}u||(i[e]=o)},s=this,u=0,f=c.objectEntries(e);u<f.length;u++){var l=f[u];o(l[0],l[1])}return i},e.prototype.transformLinkField=function(e,t,n,a){var u=this,d=this.schema.schema,h=l.parseLinkTargetPath(n.field,this.schema.schema)||c.throwError(function(){return new y.WeavingError(\"Target field \"+JSON.stringify(n.field)+\" does not exist\")}),v=(h.fieldPath,h.field),g=s.getNamedType(t.mapType(v.type));if(!(g instanceof s.GraphQLObjectType||g instanceof s.GraphQLInterfaceType))throw new y.WeavingError(\"Target field \"+JSON.stringify(n.field)+\" is of type \"+g+\", but only object and interface types are supported.\");if(n.keyField&&!(n.keyField in g.getFields()))throw new y.WeavingError(\"keyField \"+JSON.stringify(n.keyField)+\" does not exist in target type \"+g.name+\".\");if(n.batchMode&&n.oneToMany)throw new y.WeavingError(\"batchMode and oneToMany are mutually exclusive.\");if(n.oneToMany&&!p.isListType(v.type))throw new y.WeavingError(\"oneToMany is configured, but target field \"+JSON.stringify(n.field)+\" is not of type GraphQLList.\");var b=p.isListType(e.type),T=l.getKeyType({linkFieldName:e.name,linkFieldType:t.mapType(e.type),targetField:v,parentObjectType:t.mapType(t.oldOuterType),linkConfig:n,reportError:a}),O=new f.ArrayKeyWeakMap;function E(e,t,r){return i(this,void 0,void 0,function(){var i,a;return o(this,function(o){return i=t.fieldNodes.concat([r]),(a=O.get(i))||(a=new m(function(e){return l.fetchLinkedObjects({keys:e,info:t,unlinkedSchema:d,keyType:T,linkConfig:n,context:r})}),O.set(i,a)),[2,a.load(e)]})})}var _=n.linkFieldName||e.name;return this.transformationInfo.setLinkTransformationInfo(t.newOuterType.name,_,{linkConfig:n,sourceFieldName:e.name}),r({},e,{name:_,resolve:function(t,n,a,s){return i(u,void 0,void 0,function(){var i,u,c,f;return o(this,function(o){switch(o.label){case 0:return i=s.fieldNodes[0],e.resolve?[4,e.resolve(t,n,a,s)]:[3,2];case 1:return c=o.sent(),[3,3];case 2:c=t[i.name.value],o.label=3;case 3:return!(u=c)||u instanceof w?[2,u]:(r({},s,{context:a}),b?(f=u,[2,Promise.all(f.map(function(e){return E(e,s,a)}))]):[2,E(u,s,a)])}})})},type:b||n.oneToMany?new s.GraphQLList(g):g})},e.prototype.transformJoinField=function(e,t,n,a){var u=this,f=n.linkField,d=s.getNamedType(t.oldField.type);if(!(d instanceof s.GraphQLObjectType||d instanceof s.GraphQLInterfaceType))throw new y.WeavingError(\"@join feature only supported on object types and interface types, but is \"+d.constructor.name);var m=d.getFields()[f];if(!m)throw new y.WeavingError(\"linkField \"+JSON.stringify(f)+\" does not exist in this type\");var v=this.schema.getFieldMetadata(d,m),g=v?v.link:void 0;if(!g)throw new y.WeavingError(\"Field \"+JSON.stringify(f)+\" is referenced as linkField but has no @link configuration\");if(!g.batchMode||!g.keyField)throw new y.WeavingError(\"@join is only possible on @link fields with batchMode=true and keyField set\");if(g.oneToMany)throw new y.WeavingError(\"Link specifies oneToMany, but @join does not support one-to-many links.\");var b=l.parseLinkTargetPath(g.field,this.schema.schema)||c.throwError(\"Link defines target field as \"+JSON.stringify(g.field)+\" which does not exist\"),T=b.fieldPath,O=b.field;if(p.isListType(m.type))throw new y.WeavingError(\"@join not available for linkFields with array type\");var E,_=s.getNamedType(t.oldField.type),S=s.getNamedType(O.type),k=l.getKeyType({linkFieldName:f,linkFieldType:m.type,targetField:O,parentObjectType:_,linkConfig:g,reportError:a}),j=g.linkFieldName||f,N=t.oldField.args.filter(function(e){return e.name==l.FILTER_ARG})[0],P=O.args.filter(function(e){return e.name==l.FILTER_ARG})[0];if(P){var F=this.generateJoinFilterTypeName(_,N,S,P),M=void 0;if(N){var L=t.mapType(N.type);if(!(L instanceof s.GraphQLInputObjectType))throw new y.WeavingError(\"Type of filter argument should be InputObjectType, but is \"+N.type);M=r({},L.getFields(),((W={})[j]={type:t.mapType(P.type)},W))}else(V={})[j]={type:t.mapType(P.type)},M=V;E=this.findOrCreateInputObjectType(F,{fields:M})}else E=N?N.type:void 0;var x={};E&&(x=r({},x,((B={})[l.FILTER_ARG]={type:E},B)));var I,A=e.args?e.args[l.ORDER_BY_ARG]:void 0,Q=O.args.filter(function(e){return e.name==l.ORDER_BY_ARG})[0];if(Q){var G=s.getNamedType(Q.type);if(!(G instanceof s.GraphQLEnumType))throw new y.WeavingError(\"orderBy argument of target field \"+JSON.stringify(T)+\" should be of enum type, but is \"+G.constructor.name);var D=this.generateJoinOrderByTypeName(_,A,S,Q),C=[];if(A){var R=s.getNamedType(A.type);if(!(R instanceof s.GraphQLEnumType))throw new y.WeavingError(\"orderBy argument should be of enum type, but is \"+R.constructor.name);C=R.getValues()}C=C.concat(G.getValues().map(function(e){return r({},e,{name:j+\"_\"+e.name,value:j+\"_\"+e.value})})),I=this.findOrCreateEnumType(D,{values:c.arrayToObject(C.map(function(e){return{name:e.name,value:e.value,deprecationReason:e.deprecationReason}}),function(e){return e.name})})}else I=A?A.type:void 0;I&&(x=r({},x,((J={})[l.ORDER_BY_ARG]={type:I},J)));var V,W,B,J,U,q=e.args?e.args[l.FIRST_ARG]:void 0;O.args.filter(function(e){return e.name==l.FIRST_ARG})[0];return q&&(x=r({},x,((U={})[l.FIRST_ARG]=q,U))),this.transformationInfo.setJoinTransformationInfo(t.newOuterType.name,e.name,{leftFilterArgType:N?N.type:void 0}),r({},e,{args:x,resolve:function(e,n,a,s){return i(u,void 0,void 0,function(){var u,f,p,d,y,m,v,b,T,O,E,_,S,N,F,M,L,x,I,A,Q,G,D,C,R,V,W,B,J,U,q,H,K=this;return o(this,function(Y){switch(Y.label){case 0:return[4,t.oldField.resolve(e,n,a,s)];case 1:return u=(u=Y.sent()).slice(),f=void 0,void 0!=n[l.FILTER_ARG]&&(f=n[l.FILTER_ARG][j]),p=!!f,d=void 0,void 0!=n[l.ORDER_BY_ARG]&&(y=n[l.ORDER_BY_ARG]).startsWith(j+\"_\")&&(d=y.substr((j+\"_\").length)),m=c.flatMap(s.fieldNodes,function(e){return e.selectionSet.selections}),v=h.expandSelections(m,s.fragments).filter(function(e){return e.name.value==j}),b=Array.from(c.groupBy(v,function(e){return h.getAliasOrName(e)})),b.map(function(e){return e[0]}),!f&&!d||b.length||b.push([void 0,[{kind:\"Field\",name:{kind:\"Name\",value:j}}]]),T=b[0],O=T&&T[0]||\"_joined\",E=T?c.groupBy(u,function(e){return e[O]}):new Map,_=Array.from(E.keys()),[4,Promise.all(b.map(function(e){var t=e[0],u=e[1];return i(K,void 0,void 0,function(){var e,i,h;return o(this,function(o){switch(o.label){case 0:return e={operation:s.operation,variableValues:s.variableValues,fragments:s.fragments,fieldNodes:u,path:s.path},i=void 0,(f||d)&&p&&l.FIRST_ARG in n&&(i=n[l.FIRST_ARG]),[4,l.fetchJoinedObjects({keys:c.compact(_),additionalFilter:f,filterType:P.type,orderBy:d,first:i,keyType:k,linkConfig:g,unlinkedSchema:this.schema.schema,info:e,context:a})];case 1:return h=o.sent(),[2,r({alias:t},h)]}})})}))];case 2:if(S=Y.sent(),N=[],d){for(F=S[0],M=new Set,L=function(e){for(var t=e[F.keyFieldAlias],n=E.get(t)||[],r=F.alias||\"_joined\",i=n.filter(function(e){return S.every(function(t){return t.objectsByID.has(e[r])})}),o=0,a=S;o<a.length;o++)for(var s=a[o],u=s.alias,c=(s.orderedObjects,s.objectsByID),f=0,l=i;f<l.length;f++){var p=l[f];M.add(p);var d=p[u||\"_joined\"],h=c.get(d);u&&h&&(p[u]=new w(h))}N.push.apply(N,i)},x=0,I=F.orderedObjects;x<I.length;x++)q=I[x],L(q);if(!p){if(!(A=d.toUpperCase().endsWith(\"_DESC\"))&&!d.toUpperCase().endsWith(\"_ASC\"))throw new Error(\"Expected order by clause \"+d+\" to end with _ASC or _DESC\");Q=u.filter(function(e){return!M.has(e)}),A?N.push.apply(N,Q):N.unshift.apply(N,Q)}}else{for(p&&(u=u.filter(function(e){return S.every(function(t){var n=t.objectsByID,r=t.alias;return n.has(e[r||\"_joined\"])})})),G=0,D=u;G<D.length;G++)for(C=D[G],R=0,V=S;R<V.length;R++)W=V[R],B=W.alias,J=W.objectsByID,U=C[B||\"_joined\"],q=J.get(U),B&&q&&(C[B]=new w(q));N=u}return void 0!=n[l.FIRST_ARG]&&(H=n[l.FIRST_ARG],N=N.slice(0,H)),[2,N]}})})}})},e.prototype.generateJoinFilterTypeName=function(e,t,n,r){var i=\"\",o=\"\";return t&&(i=t.type instanceof s.GraphQLInputObjectType?t.type.name.replace(/Filter$/,\"\"):e.name),r&&(o=r.type instanceof s.GraphQLInputObjectType?r.type.name.replace(/Filter$/,\"\"):n.name),\"\"+i+(i&&o?\"With\":\"\")+o+\"JoinedFilter\"},e.prototype.generateJoinOrderByTypeName=function(e,t,n,r){var i=\"\",o=\"\";return t&&(i=t.type instanceof s.GraphQLEnumType?t.type.name.replace(/OrderBy$/,\"\"):e.name),r&&(o=r.type instanceof s.GraphQLEnumType?r.type.name.replace(/OrderBy$/,\"\"):n.name),\"\"+i+(i&&o?\"With\":\"\")+o+\"JoinedOrderBy\"},e.prototype.findOrCreateInputObjectType=function(e,t){var n=this.inputObjectTypeMap[e];return n||(n=new s.GraphQLInputObjectType(r({},t,{name:e})),this.inputObjectTypeMap[e]=n),n},e.prototype.findOrCreateEnumType=function(e,t){var n=this.inputObjectTypeMap[e];return n||(n=new s.GraphQLEnumType(r({},t,{name:e})),this.inputObjectTypeMap[e]=n),n},e}()},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(9),o=n(10),a=function(){function e(e){this.namespace=e}return e.prototype.transformSchema=function(e){var t=this,n=new i.GraphQLSchema({directives:e.getDirectives(),query:this.wrap(e.getQueryType(),\"Query\"),mutation:o.maybeDo(e.getMutationType(),function(e){return t.wrap(e,\"Mutation\")}),subscription:o.maybeDo(e.getSubscriptionType(),function(e){return t.wrap(e,\"Subscription\")})});return this.schema=n,n},e.prototype.transformQuery=function(e){var t=this;if(!this.schema)throw new Error(\"Schema not yet built\");var n=i.visit(e.document,{FragmentDefinition:function(e){if(n=e.typeCondition.name.value,r=t.schema,i=r.getMutationType(),o=r.getSubscriptionType(),!(n==r.getQueryType().name||i&&n==i.name||o&&n==o.name))return!1;var n,r,i,o},Field:function(){return!1},SelectionSet:function(e){if(!e.selections.length)return!1;var t=e.selections[0];if(e.selections.length>1||\"Field\"!=t.kind||!t.selectionSet)throw new Error(\"Unexpected top-level selection set, should be one field with selections\");return t.selectionSet}});return r({},e,{document:n})},e.prototype.wrap=function(e,t){return new i.GraphQLObjectType({name:\"Wrapped\"+e.name,description:\"Namespace root\",fields:(n={},n[this.namespace]={type:e,description:t+\" of \"+this.namespace,resolve:function(e){return{}}},n)});var n},e}();t.NamespaceModule=a},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(16),o=n(53),a=function(){function e(e){this.prefix=e}return e.prototype.getSchemaTransformer=function(){var e=this;return new o.TypeRenamingTransformer(function(t){return e.prefix+t})},e.prototype.transformQuery=function(e){var t=this;return r({},e,{document:i.renameTypes(e.document,function(e){return t.removeTypePrefix(e)})})},e.prototype.removeTypePrefix=function(e){return e.startsWith(this.prefix)?e.substr(this.prefix.length):e},e}();t.TypePrefixesModule=a},function(e,t,n){\"use strict\";function r(e,t){var n={};for(var r in e)n[r]=t(e[r],r);return n}function i(e,t){var n={};for(var r in e){var i=e[r];t(i,r)&&(n[r]=i)}return n}function o(e){var t=[];return t.concat.apply(t,e)}Object.defineProperty(t,\"__esModule\",{value:!0}),t.objectValues=function(e){return Object.keys(e).map(function(t){return e[t]})},t.mapValues=r,t.filterValues=i,t.filterValuesDeep=function e(t,n){return t instanceof Array?t.filter(n).map(function(t){return e(t,n)}):\"object\"==typeof t&&null!==t?r(i(t,n),function(t){return e(t,n)}):t},t.flatten=o,t.flatMap=function(e,t){return o(e.map(t))},t.compact=function(e){return e.filter(function(e){return void 0!=e})},t.bindNullable=function(e,t){return e?e.bind(t):e}},function(e,t,n){!function(t,n,r){var i=Object.getOwnPropertyNames,o=Object.defineProperty,a=Function.prototype.toString,s=Object.create,u=Object.prototype.hasOwnProperty,c=/^\\n?function\\s?(\\w*)?_?\\(/;function f(e,t,n){return\"function\"==typeof t&&(t=l(n=t).replace(/_$/,\"\")),o(e,t,{configurable:!0,writable:!0,value:n})}function l(e){return\"function\"!=typeof e?\"\":\"name\"in e?e.name:a.call(e).match(c)[1]}var p=function(){var e={value:{writable:!0,value:r}},t=\"return function(k){if(k===s)return l}\",n=s(null),a=function(){var e=Math.random().toString(36).slice(2);return e in n?a():n[e]=e},c=a(),l=function(e){if(u.call(e,c))return e[c];if(!Object.isExtensible(e))throw new TypeError(\"Object must be extensible\");var t=s(null);return o(e,c,{value:t}),t};function p(){var n=a(),r={};this.unlock=function(i){var a=l(i);if(u.call(a,n))return a[n](r);var c=s(null,e);return o(a,n,{value:new Function(\"s\",\"l\",t)(r,c)}),c}}return f(Object,function(e){var t=i(e);return u.call(e,c)&&t.splice(t.indexOf(c),1),t}),f(p.prototype,function(e){return this.unlock(e).value}),f(p.prototype,function(e,t){this.unlock(e).value=t}),p}(),d=function(e){var i=function(e){if(null==e||\"object\"!=typeof e&&\"function\"!=typeof e)throw new TypeError(\"Invalid WeakMap key\")},o=function(t,n){var r=e.unlock(t);if(r.value)throw new TypeError(\"Object is already a WeakMap\");r.value=n},a=function(t){var n=e.unlock(t).value;if(!n)throw new TypeError(\"WeakMap is not generic\");return n},s=function(e,t){null!==t&&\"object\"==typeof t&&\"function\"==typeof t.forEach&&t.forEach(function(n,r){n instanceof Array&&2===n.length&&c.call(e,t[r][0],t[r][1])})};function u(e){if(this===t||null==this||this===u.prototype)return new u(e);o(this,new p),s(this,e)}function c(e,t){i(e),a(this).set(e,t===r?n:t)}function d(e){i(e);var t=a(this),n=t.get(e)!==r;return t.set(e,r),n}try{var h=(\"return \"+d).replace(\"e_\",\"\\\\u0065\"),y=new Function(\"unwrap\",\"validate\",h)(a,i)}catch(e){y=d}h=(\"\"+Object).split(\"Object\");var m=function(){return h[0]+l(this)+h[1]};f(m,m);var v={__proto__:[]}instanceof Array?function(e){e.__proto__=m}:function(e){f(e,m)};return v(u),[function(){return a(this),\"[object WeakMap]\"},function(e){i(e);var t=a(this).get(e);return t===n?r:t},c,function(e){return i(e),a(this).get(e)!==r},y].forEach(function(e){f(u.prototype,e),v(e)}),u}(new p),h=Object.create?function(){return Object.create(null)}:function(){return{}};function y(e){var t=new d;return e||(e=h),function(n,i){return i||2===arguments.length?t.set(n,i):(i=t.get(n))===r&&(i=e(n),t.set(n,i)),i}}e.exports=d,d.createStorage=y,t.WeakMap&&(t.WeakMap.createStorage=y)}((0,eval)(\"this\"))},function(e,t,n){e.exports=n(61).default},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(9),s=n(0),u=n(66),c=n(62),f=n(36),l=n(10),p=function(){function e(e){this.fetch=s.default,this.url=e.url}return e.prototype.execute=function(e,t,n,r){return i(this,void 0,void 0,function(){var i,a,s,u,c;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.fetchResponse(e,t,n,r)];case 1:return i=o.sent(),[3,3];case 2:throw a=o.sent(),new f(\"Error connecting to GraphQL endpoint at \"+this.url+\": \"+a.message,a);case 3:if(i.ok)return[3,8];if(\"application/json\"!=i.headers.get(\"Content-Type\"))return[3,7];o.label=4;case 4:return o.trys.push([4,6,,7]),[4,i.json()];case 5:return(s=o.sent())&&\"object\"==typeof s&&s.errors&&\"object\"==typeof s.errors&&s.errors.length?[2,s]:[3,7];case 6:return o.sent(),[3,7];case 7:throw new Error(\"GraphQL endpoint at \"+this.url+\" reported \"+i.status+\" \"+i.statusText);case 8:return o.trys.push([8,10,,11]),[4,i.json()];case 9:return u=o.sent(),[3,11];case 10:throw c=o.sent(),new f(\"Response from GraphQL endpoint at \"+this.url+\" is invalid json: \"+c.message,c);case 11:if(\"object\"!=typeof u)throw new Error(\"Response from GraphQL endpoint at \"+this.url+\" is not an object\");return[4,this.processResponse(u,e,t,n,r)];case 12:return[2,o.sent()]}})})},e.prototype.fetchResponse=function(e,t,n,r){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return i=this.fetch,[4,this.getRequest(e,t,n,r)];case 1:return[2,i.apply(this,[o.sent()])]}})})},e.prototype.getRequest=function(e,t,n,r){return i(this,void 0,void 0,function(){var i,a,u;return o(this,function(o){switch(o.label){case 0:return i=s.Request.bind,a=[void 0,this.url],u={method:\"POST\"},[4,this.getHeaders(e,t,n,r)];case 1:return u.headers=o.sent(),[4,this.getBody(e,t,n)];case 2:return[2,new(i.apply(s.Request,a.concat([(u.body=o.sent(),u)])))]}})})},e.prototype.getHeaders=function(e,t,n,r){return i(this,void 0,void 0,function(){return o(this,function(e){return[2,{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}]})})},e.prototype.getBody=function(e,t,n,r){return i(this,void 0,void 0,function(){return o(this,function(n){return[2,JSON.stringify({query:a.print(e),variables:t})]})})},e.prototype.processResponse=function(e,t,n,s,u){return i(this,void 0,void 0,function(){var n,i=this;return o(this,function(o){return e&&e.errors&&e.errors.length&&e.errors.some(function(e){return!!e.locations&&e.locations.length>0})?(n=a.parse(a.print(t)),[2,r({},e,{errors:e.errors.map(function(e){if(!e.locations||!e.locations.length)return e;var r=l.compact(e.locations.map(function(e){return i.mapLocationsToOriginal(e,n,t)})),o=r.length?r[0].source:void 0;return new a.GraphQLError(e.message,void 0,o,r.map(function(e){return e.start}),e.path)})})]):[2,e]})})},e.prototype.mapLocationsToOriginal=function(e,t,n){var r=u.findNodeAtLocation(e,t);if(r){var i=c.findNodeInOtherDocument(r,t,n);if(i&&i.loc)return i.loc}},e}();t.HttpGraphQLClient=p},function(e,t,n){\"use strict\";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var o=n(9),a=n(18),s=n(22),u=n(16),c=n(20);function f(e){return s.EXTENDED_INTROSPECTION_FIELD in e.getQueryType().getFields()}t.fetchSchemaMetadata=function(e,t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return f(t)?[4,e.execute(function(e){var t=[];if(e.getType(s.EXTENDED_INTROSPECTION_TYPE_NAMES.fieldJoin)){var n=[u.createFieldNode(\"linkField\"),u.createFieldNode(\"ignore\")];t.push(u.createFieldNode(\"join\",void 0,n))}var r=e.getType(s.EXTENDED_INTROSPECTION_TYPE_NAMES.fieldLink);if(r&&r instanceof o.GraphQLObjectType){var i=[\"field\",\"argument\",\"batchMode\",\"keyField\",\"linkFieldName\",\"ignore\"].filter(function(e){return e in r.getFields()}).map(function(e){return u.createFieldNode(e)});t.push(u.createFieldNode(\"link\",void 0,i))}return{kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",selectionSet:{kind:\"SelectionSet\",selections:[u.createFieldNode(s.EXTENDED_INTROSPECTION_FIELD,void 0,[u.createFieldNode(\"types\",void 0,[u.createFieldNode(\"name\"),u.createFieldNode(\"fields\",void 0,[u.createFieldNode(\"name\"),u.createFieldNode(\"metadata\",void 0,t)])])])]}}]}}(t),void 0,void 0,!0)]:[2,new a.SchemaMetadata];case 1:return n=i.sent(),r=c.assertSuccessfulResult(n),[2,s.buildSchemaMetadata(r[s.EXTENDED_INTROSPECTION_FIELD])]}})})},t.supportsExtendedIntrospection=f},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(24),o=n(9),a=n(10),s=function(){function e(){}return e.prototype.getSchemaTransformer=function(){return new u},e}();t.ErrorResolversModule=s;var u=function(){function e(){}return e.prototype.transformField=function(e){var t=e.resolve||o.defaultFieldResolver;return r({},e,{resolve:function(e,n,r,o){var s=t(e,n,r,o);if(a.isPromise(s))return s.then(function(e){if(e instanceof i.FieldErrorValue)throw e.getError();return e});if(s instanceof i.FieldErrorValue)throw s.getError();return s}})},e}();t.ErrorResolversTransformer=u},function(e,t){e.exports=require(\"graphql/language\")},function(e,t,n){\"use strict\";t.__esModule=!0;var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=n(9),o=n(40);function a(e){return e}t.default=new i.GraphQLScalarType({name:\"JSON\",description:\"The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).\",serialize:a,parseValue:a,parseLiteral:function e(t){switch(t.kind){case o.Kind.STRING:case o.Kind.BOOLEAN:return t.value;case o.Kind.INT:case o.Kind.FLOAT:return parseFloat(t.value);case o.Kind.OBJECT:var n=(i=Object.create(null),t.fields.forEach(function(t){i[t.name.value]=e(t.value)}),{v:i});if(\"object\"===(void 0===n?\"undefined\":r(n)))return n.v;case o.Kind.LIST:return t.values.map(e);default:return null}var i}}),e.exports=t.default},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(41),o=function(){function e(){}return e.prototype.getSchemaTransformer=function(){return new a},e}();t.CustomScalarTypesSerializationModule=o;var a=function(){function e(){}return e.prototype.transformScalarType=function(e){return r({},e,{parseValue:function(e){return i.parseValue(e)},parseLiteral:function(e){return i.parseLiteral(e)},serialize:function(e){return i.serialize(e)}})},e}();t.CustomScalarTypesSerializationTransformer=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(29),i=n(10),o=function(){function e(e){this.endpointConfig=e}return e.prototype.transformExtendedSchema=function(e){this.endpointConfig.fieldMetadata;return this.endpointConfig.fieldMetadata?e.withFieldMetadata(r.mergeFieldMetadata(e.fieldMetadata,i.objectToMap(this.endpointConfig.fieldMetadata))):e},e}();t.AdditionalMetadataModule=o},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(22),o=n(17),a=function(){function e(){}return e.prototype.transformExtendedSchema=function(e){return e.withSchema(o.transformSchema(e.schema,{transformFields:function(t,n){var o;return n.oldOuterType!=e.schema.getQueryType()?t:r({},t,((o={})[i.EXTENDED_INTROSPECTION_FIELD]={type:i.getExtendedIntrospectionType(),resolve:function(){return i.getExtendedIntrospectionData(e.metadata)}},o))}}))},e}();t.ExtendedIntrospectionModule=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9),i=n(10),o=n(21);function a(e,t){return new r.GraphQLObjectType({name:t,description:\"The merged \"+t+\" root type\",fields:Object.assign.apply(Object,[{}].concat(e.map(function(e){return i.mapValues(e.getFields(),u)})))})}function s(e,t){if(void 0!=e&&0!=e.length)return a(e,t)}function u(e){return{description:e.description,type:e.type,resolve:e.resolve,deprecationReason:e.deprecationReason,args:i.arrayToObject(e.args,function(e){return e.name})}}t.mergeSchemas=function(e){if(!e.length)return new r.GraphQLSchema({query:new r.GraphQLObjectType({name:\"Query\",fields:{_empty:{type:r.GraphQLBoolean,description:\"This field only exists because the schema is empty.\",resolve:function(){return!0}}}})});var t,n=i.flatMap(e,function(e){return i.objectValues(e.getTypeMap()).filter(function(t){return!o.isRootType(t,e)})});return new r.GraphQLSchema({query:a(e.map(function(e){return e.getQueryType()}),\"Query\"),mutation:s(i.mapAndCompact(e,function(e){return e.getMutationType()}),\"Mutation\"),subscription:s(i.mapAndCompact(e,function(e){return e.getSubscriptionType()}),\"Subscription\"),directives:(t=[]).concat.apply(t,e.map(function(e){return e.getDirectives()})),types:n})}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.collectAliasesInResponsePath=function(e){for(var t=[],n=e;n;){if(\"number\"==typeof n.key)throw new Error(\"List types around proxy fields not supported\");t.unshift(n.key),n=n.prev}return t}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,\"__esModule\",{value:!0});var s=n(25),u=n(16),c=n(21),f=n(46),l=n(20),p=n(24),d=n(30),h=function(){function e(e){this.config=e}return e.prototype.getSchemaTransformer=function(){return new y(this.config)},e}();t.ProxyResolversModule=h;var y=function(){function e(e){this.config=e}return e.prototype.transformField=function(e,t){var n=this;return c.isRootType(t.oldOuterType,t.oldSchema)?r({},e,{resolve:function(e,t,c,h){return i(n,void 0,void 0,function(){var e,t,n,i,y,m,v,g,b,w;return o(this,function(o){switch(o.label){case 0:return e=s.getFieldAsQueryParts(h),t=e.selectionSet,n=a(e,[\"selectionSet\"]),i=f.collectAliasesInResponsePath(h.path),y=u.collectFieldNodesInPath(h.operation.selectionSet,i,h.fragments),m=u.cloneSelectionChain(y,t.selections.length?t:void 0),v=s.getQueryFromParts(r({},n,{selectionSet:m})),v=this.config.processQuery(v),[4,this.config.client.execute(v.document,v.variableValues,c)];case 1:if(g=o.sent(),g=p.moveErrorsToData(g,function(e){return d.prefixGraphQLErrorPath(e,h.path,1)}),b=l.assertSuccessfulResult(g),w=i[i.length-1],\"object\"!=typeof b||!(w in b))throw new Error(\"Expected GraphQL endpoint to return object with property \"+JSON.stringify(w));return[2,b[w]]}})})}}):e},e}();t.ResolverTransformer=y},function(e,t,n){\"use strict\";t.__esModule=!0;var r,i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),\"function\"!=typeof t)throw new TypeError(\"DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but got: \"+t+\".\");this._batchLoadFn=t,this._options=n,this._promiseCache=n&&n.cacheMap||new Map,this._queue=[]}return e.prototype.load=function(e){var t=this;if(null===e||void 0===e)throw new TypeError(\"The loader.load() function must be called with a value,but got: \"+String(e)+\".\");var n=this._options,i=!n||!1!==n.batch,a=!n||!1!==n.cache,s=n&&n.cacheKeyFn,u=s?s(e):e;if(a){var c=this._promiseCache.get(u);if(c)return c}var f=new Promise(function(n,a){t._queue.push({key:e,resolve:n,reject:a}),1===t._queue.length&&(i?function(e){r||(r=Promise.resolve());r.then(function(){return process.nextTick(e)})}(function(){return o(t)}):o(t))});return a&&this._promiseCache.set(u,f),f},e.prototype.loadMany=function(e){var t=this;if(!Array.isArray(e))throw new TypeError(\"The loader.loadMany() function must be called with Array<key> but got: \"+e+\".\");return Promise.all(e.map(function(e){return t.load(e)}))},e.prototype.clear=function(e){var t=this._options&&this._options.cacheKeyFn,n=t?t(e):e;return this._promiseCache.delete(n),this},e.prototype.clearAll=function(){return this._promiseCache.clear(),this},e.prototype.prime=function(e,t){var n=this._options&&this._options.cacheKeyFn,r=n?n(e):e;if(void 0===this._promiseCache.get(r)){var i=t instanceof Error?Promise.reject(t):Promise.resolve(t);this._promiseCache.set(r,i)}return this},e}();function o(e){var t=e._queue;e._queue=[];var n=e._options&&e._options.maxBatchSize;if(n&&n>0&&n<t.length)for(var r=0;r<t.length/n;r++)a(e,t.slice(r*n,(r+1)*n));else a(e,t)}function a(e,t){var n=t.map(function(e){return e.key}),r=(0,e._batchLoadFn)(n);if(!r||\"function\"!=typeof r.then)return s(e,t,new TypeError(\"DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise: \"+String(r)+\".\"));r.then(function(e){if(!Array.isArray(e))throw new TypeError(\"DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array: \"+String(e)+\".\");if(e.length!==n.length)throw new TypeError(\"DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys.\\n\\nKeys:\\n\"+String(n)+\"\\n\\nValues:\\n\"+String(e));t.forEach(function(t,n){t.key;var r=t.resolve,i=t.reject,o=e[n];o instanceof Error?i(o):r(o)})}).catch(function(n){return s(e,t,n)})}function s(e,t,n){t.forEach(function(t){var r=t.key,i=t.reject;e.clear(r),i(n)})}t.default=i,e.exports=t.default},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,\"__esModule\",{value:!0});var s=n(9),u=n(21),c=n(10),f=n(25),l=n(16),p=n(28),d=n(20),h=n(24),y=n(30),m=n(19);function v(e,t){var n=e.split(\".\"),r=u.walkFields(t.getQueryType(),n);if(r)return{field:r,fieldPath:n}}function g(e){return i(this,void 0,void 0,function(){var t,n,i,a,u,c,f,p,m,v,g,b,w,T,O,E;return o(this,function(o){switch(o.label){case 0:return t=e.payloadSelectionSet,n=e.variableValues,i=e.variableDefinitions,a=e.context,u=e.schema,c=e.targetFieldPath,f=e.args,p=e.fragments,m=c.slice(),v=m.pop(),g=r({},l.createFieldNode(v),{selectionSet:t,arguments:f}),b={kind:\"SelectionSet\",selections:[g]},w=l.createSelectionChain(m,b),T={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"query\",variableDefinitions:i,selectionSet:w}].concat(p)},[4,s.execute(u,T,{},a,n)];case 1:return O=o.sent(),E=d.assertSuccessfulResult(h.moveErrorsToData(O,function(t){return y.prefixGraphQLErrorPath(t,e.path,c.length)})),[2,c.reduce(function(e,t){if(!(t in e))throw new Error('Property \"'+t+'\" missing in result of \"'+c.join(\".\")+'\"');var n=e[t];if(n instanceof h.FieldErrorValue){var r=n.getError(),i='Field \"'+c.join(\".\")+'\" reported error: '+r.message;if(r instanceof s.GraphQLError)if(r.positions&&r.positions.length||r.nodes&&r.nodes.some(function(e){return!!e.loc}))throw new s.GraphQLError(i,r.nodes,r.source,r.positions,r.path,r);throw new Error(i)}return n},E)]}})})}function b(e,t){var n=e.argument.split(\".\"),r=n[0],i=n.slice(1),o=t.args.filter(function(e){return e.name==r})[0];if(!o)throw new m.WeavingError(\"Argument \"+JSON.stringify(r)+\" does not exist on target field \"+JSON.stringify(e.field));var a=o.type;return i.reduce(function(t,n){if(!(t instanceof s.GraphQLInputObjectType&&n in t.getFields()))throw new Error(\"Argument path \"+JSON.stringify(e.argument)+\" cannot be resolved: \"+t+\" does not have a field \"+JSON.stringify(n));return t.getFields()[n].type},a)}function w(e,t,n){if(e instanceof h.FieldErrorValue)throw e.getError();var r=e.map(function(e){return e[t]}).filter(function(e){return e instanceof h.FieldErrorValue});if(r.length)throw new Error(\"Errors retrieving key field \"+JSON.stringify(n)+\":\\n\\n\"+r.map(function(e){return e.getError().message}).join(\"\\n\\n\"))}t.FILTER_ARG=\"filter\",t.ORDER_BY_ARG=\"orderBy\",t.FIRST_ARG=\"first\",t.parseLinkTargetPath=v,t.fetchLinkedObjects=function(e){return i(this,void 0,void 0,function(){var t,n,d,h,y,m,b;return o(this,function(T){return t=e.unlinkedSchema,n=e.keys,d=e.keyType,h=e.linkConfig,y=e.info,m=e.context,b=(v(h.field,t)||c.throwError(\"Link target field as \"+h.field+\" which does not exist in the schema\")).fieldPath,h.batchMode?h.keyField?[2,function(e){return i(this,void 0,void 0,function(){var n,i,v,T,O,E,_,S,k,j,N,P,F,M,L;return o(this,function(o){switch(o.label){case 0:return n=f.getFieldAsQueryParts(y),i=n.fragments,v=a(n,[\"fragments\"]),T=new s.GraphQLNonNull(new s.GraphQLList(u.getNonNullType(d))),O=h.argument.split(\".\").pop(),E=l.addVariableDefinitionSafely(v.variableDefinitions,O,T),_=E.variableDefinitions,S=E.name,k=r({},v.variableValues,((L={})[S]=e,L)),j=l.addFieldSelectionSafely(v.selectionSet,h.keyField,c.arrayToObject(i,function(e){return e.name.value})),N=j.alias,P=j.selectionSet,[4,g({targetFieldPath:b,schema:t,context:m,variableDefinitions:_,variableValues:k,fragments:i,args:[l.createNestedArgumentWithVariableNode(h.argument,S)],payloadSelectionSet:P,path:y.path})];case 1:if(w(F=o.sent(),N,h.keyField),!p.isArray(F))throw new Error(\"Result of \"+b.join(\".\")+\" expected to be an array because batchMode is true\");return M=new Map(F.map(function(e){return[e[N],e]})),[2,e.map(function(e){return M.get(e)})]}})})}(n)]:[2,function(e){return i(this,void 0,void 0,function(){var n,i,c,p,v,w,T,O,E,_;return o(this,function(o){return n=f.getFieldAsQueryParts(y),i=n.fragments,c=a(n,[\"fragments\"]),p=new s.GraphQLNonNull(new s.GraphQLList(u.getNonNullType(d))),v=h.argument.split(\".\").pop(),w=l.addVariableDefinitionSafely(c.variableDefinitions,v,p),T=w.variableDefinitions,O=w.name,E=r({},c.variableValues,((_={})[O]=e,_)),[2,g({targetFieldPath:b,schema:t,context:m,variableDefinitions:T,variableValues:E,fragments:i,args:[l.createNestedArgumentWithVariableNode(h.argument,O)],payloadSelectionSet:c.selectionSet,path:y.path})]})})}(n)]:[2,n.map(function(e){return function(e){return i(this,void 0,void 0,function(){var n,i,s,c,p,v,w,T,O,E;return o(this,function(o){switch(o.label){case 0:return n=f.getFieldAsQueryParts(y),i=n.fragments,s=a(n,[\"fragments\"]),c=u.getNonNullType(d),p=h.argument.split(\".\").pop(),v=l.addVariableDefinitionSafely(s.variableDefinitions,p,c),w=v.variableDefinitions,T=v.name,O=r({},s.variableValues,((E={})[T]=e,E)),[4,g({targetFieldPath:b,schema:t,context:m,variableDefinitions:w,variableValues:O,fragments:i,args:[l.createNestedArgumentWithVariableNode(h.argument,T)],payloadSelectionSet:s.selectionSet,path:y.path})];case 1:return[2,o.sent()]}})})}(e)})]})})},t.fetchJoinedObjects=function(e){return i(this,void 0,void 0,function(){var n,i,s,u,d,h,y,b,T,O,E,_,S,k,j,N,P,F,M,L,x,I,A,Q,G,D,C,R,V,W;return o(this,function(o){switch(o.label){case 0:if(n=e.unlinkedSchema,i=e.additionalFilter,s=e.orderBy,u=e.filterType,d=e.linkConfig,h=e.info,y=e.context,b=e.keys,T=f.getFieldAsQueryParts(h),O=T.fragments,E=a(T,[\"fragments\"]),_=(v(d.field,n)||c.throwError(function(){return new m.WeavingError(\"Target field \"+JSON.stringify(d.field)+\" does not exist\")})).fieldPath,S=d.argument.split(\".\"),k=S[0],!(j=S.slice(1)))throw new m.WeavingError(\"argument \"+JSON.stringify(d.argument)+\" on link field needs to be a path of the form argumentName.fieldPath, where fieldPath is dot-separated.\");return N=c.modifyPropertyAtPath(i,function(e){return e?c.intersect(e,b):b},j),P=h.fieldNodes[0].name.value+\"Filter\",F=l.addVariableDefinitionSafely(E.variableDefinitions,P,u),M=F.variableDefinitions,L=F.name,x=r({},E.variableValues,((W={})[L]=N,W)),I=l.addFieldSelectionSafely(E.selectionSet,d.keyField,c.arrayToObject(O,function(e){return e.name.value})),A=I.alias,Q=I.selectionSet,G=[{kind:\"Argument\",name:{kind:\"Name\",value:k},value:{kind:\"Variable\",name:{kind:\"Name\",value:L}}}],s&&(D={kind:\"Argument\",name:{kind:\"Name\",value:t.ORDER_BY_ARG},value:{kind:\"EnumValue\",value:s}},G=G.concat([D])),void 0!=e.first&&(C={kind:\"Argument\",name:{kind:\"Name\",value:t.FIRST_ARG},value:{kind:\"IntValue\",value:e.first+\"\"}},G=G.concat([C])),[4,g({targetFieldPath:_,schema:n,context:y,variableDefinitions:M,variableValues:x,fragments:O,args:G,payloadSelectionSet:Q,path:h.path})];case 1:if(R=o.sent(),!p.isArray(R))throw new Error(\"Result of \"+_.join(\".\")+\" expected to be an array because batchMode is true\");return w(R,A,d.keyField),V=new Map(R.map(function(e){return[e[A],e]})),[2,{orderedObjects:R,objectsByID:V,keyFieldAlias:A}]}})})},t.getLinkArgumentType=b,t.getKeyType=function(e){var t=s.getNamedType(e.linkFieldType),n=s.getNamedType(b(e.linkConfig,e.targetField));if(!(t instanceof s.GraphQLScalarType))throw new m.WeavingError(\"Type of @link field must be scalar type or list/non-null type of scalar type, but is \"+e.linkFieldType);if(!(n instanceof s.GraphQLScalarType))throw new m.WeavingError(\"Type of argument field \"+JSON.stringify(e.linkConfig.argument)+\" must be scalar type or list/non-null-type of a scalar type, but is \"+n);return n.name!=t.name&&e.reportError(new m.WeavingError(\"Link field \"+JSON.stringify(e.linkFieldName)+\" is of type \"+t+\", but argument \"+JSON.stringify(e.linkConfig.argument)+\" on target field \"+JSON.stringify(e.linkConfig.field)+\" has type \"+n)),n}},function(e,t,n){\"use strict\";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(){}return e.prototype.getBucketKey=function(t){return t.length?t[0]:e.EMPTY_BUCKET},e.prototype.equals=function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0},e.EMPTY_BUCKET={},e}(),a=function(){function e(e){this.strategy=e,this.map=new WeakMap}return e.prototype.delete=function(e){var t=this.find(e);return!!t&&(t.bucket.splice(t.index,1),!0)},e.prototype.get=function(e){var t=this.find(e);if(t)return t.bucket[t.index].value},e.prototype.has=function(e){return!!this.find(e)},e.prototype.set=function(e,t){var n=this.strategy.getBucketKey(e),r=this.map.get(n);r||(r=[],this.map.set(n,r));var i=this.findIndex(r,e);return void 0==i?r.push({key:e,value:t}):r[i].value=t,this},e.prototype.find=function(e){var t=this.map.get(this.strategy.getBucketKey(e));if(t){var n=this.findIndex(t,e);if(void 0!=n)return{index:n,bucket:t}}},e.prototype.findIndex=function(e,t){for(var n=e.length,r=0;r<n;r++)if(this.strategy.equals(e[r].key,t))return r},e}();t.MultiKeyWeakMap=a;var s=function(e){function t(){return e.call(this,new o)||this}return i(t,e),t}(a);t.ArrayKeyWeakMap=s},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(9),s=n(17),u=n(16),c=function(){function e(){}return e.prototype.transformSchema=function(e){var t=s.transformSchema(e,new f);return this.schema=e,t},e.prototype.transformQuery=function(e){var t=new a.TypeInfo(this.schema),n=a.visit(e.document,a.visitWithTypeInfo(t,{SelectionSet:function(e){var n=t.getType();if(!n)throw new Error(\"Failed to determine type of SelectionSet node\");if(a.isAbstractType(a.getNamedType(n))){var i=e.selections.filter(function(e){return\"Field\"==e.kind&&\"__typename\"==u.getAliasOrName(e)})[0];if(!i)return r({},e,{selections:e.selections.concat([{kind:\"Field\",name:{kind:\"Name\",value:\"__typename\"}}])});if(\"__typename\"!=i.name.value)throw new Error(\"Fields must not be aliased to __typename because this is a reserved field.\")}}}));return r({},e,{document:n})},e}();t.AbstractTypesModule=c;var f=function(){function e(){}return e.prototype.transformObjectType=function(e){return r({},e,{isTypeOf:void 0})},e.prototype.transformInterfaceType=function(e,t){return r({},e,{resolveType:this.getResolver(e.name,t)})},e.prototype.transformUnionType=function(e,t){return r({},e,{resolveType:this.getResolver(e.name,t)})},e.prototype.getResolver=function(e,t){var n=this;return function(r){return i(n,void 0,void 0,function(){var n,i;return o(this,function(o){if(!(\"__typename\"in r))throw new Error(\"__typename does not exist on fetched object of abstract type \"+e);if(n=r.__typename,!(i=t.findType(n)))throw new Error(\"__typename of abstract type \"+e+\" is set to \"+JSON.stringify(n)+\", but there is no type with that name\");if(!(i instanceof a.GraphQLObjectType))throw new Error(\"__typename of abstract type \"+e+\" is set to \"+JSON.stringify(n)+\", but that is a \"+i.constructor.name+\" and not a GraphQLObjectType.\");return[2,i]})})}},e}()},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=function(){function e(){}return e.prototype.getSchemaTransformer=function(){return new o},e}();t.DefaultResolversModule=i;var o=function(){function e(){}return e.prototype.transformField=function(e){return e.resolve?e:r({},e,{resolve:function(e,t,n,r){var i=r.fieldNodes[0];return e[i.alias?i.alias.value:i.name.value]}})},e}();t.DefaultResolversTransformer=o},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(17);t.renameTypes=function(e,t){return i.transformSchema(e,new o(t))};var o=function(){function e(e){this.typeNameTransformer=e,this.transformEnumType=this.rename,this.transformInterfaceType=this.rename,this.transformObjectType=this.rename,this.transformScalarType=this.rename,this.transformUnionType=this.rename,this.transformInputObjectType=this.rename,this.transformDirective=this.rename}return e.prototype.rename=function(e){return r({},e,{name:this.typeNameTransformer(e.name)})},e}();t.TypeRenamingTransformer=o},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9),i=n(34);function o(e){var t=new Set,n=new Set;function o(e){if(e=r.getNamedType(e),!t.has(e))if(t.add(e),e instanceof r.GraphQLUnionType)for(var a=0,s=e.getTypes();a<s.length;a++){o(s[a])}else if(e instanceof r.GraphQLInterfaceType||e instanceof r.GraphQLObjectType){e instanceof r.GraphQLInterfaceType&&n.add(e);for(var u=0,c=i.objectValues(e.getFields());u<c.length;u++){o(c[u].type)}}}for(var a=0,s=e;a<s.length;a++){o(s[a])}return n}function a(e,t){var n=o(t),r=new Set,i=!1;do{for(var a=e.filter(function(e){return e.getInterfaces().some(function(e){return n.has(e)})}),s=0,u=a;s<u.length;s++){var c=u[s];r.add(c)}var f=o(a);i=!1;for(var l=0,p=Array.from(f);l<p.length;l++){var d=p[l];n.has(d)||(i=!0,n.add(d))}}while(i);return Array.from(r)}t.removeUnusedTypesFromSchema=function(e){var t=i.compact([e.getQueryType(),e.getMutationType(),e.getSubscriptionType()]),n=i.objectValues(e.getTypeMap()).filter(function(e){return e instanceof r.GraphQLObjectType});return new r.GraphQLSchema({query:e.getQueryType(),mutation:e.getMutationType()||void 0,subscription:e.getSubscriptionType()||void 0,directives:e.getDirectives(),types:a(n,t)})},t.filterUsableInterfaceImplementations=a},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9);t.orderTypesTopologically=function(e){function t(e){return e instanceof r.GraphQLInterfaceType?0:e instanceof r.GraphQLUnionType?2:1}return e.slice().sort(function(e,n){return t(e)-t(n)})},t.walkFields=function(e,t){for(var n,i=e,o=0,a=t;o<a.length;o++){var s=a[o];if(!(i instanceof r.GraphQLObjectType||i instanceof r.GraphQLInterfaceType))return;var u=i.getFields();if(!(s in u))return;i=(n=u[s]).type}return n}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});for(var r=n(9),i={},o=0,a=[r.GraphQLInt,r.GraphQLString,r.GraphQLBoolean,r.GraphQLFloat,r.GraphQLID];o<a.length;o++){var s=a[o];i[s.name]=s}t.isNativeGraphQLType=function(e){return(\"string\"==typeof e?e:e.name)in i};for(var u={},c=0,f=r.specifiedDirectives;c<f.length;c++){var l=f[c];u[l.name]=l}t.isNativeDirective=function(e){return(\"string\"==typeof e?e:e.name)in u}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(9),o=n(56),a=n(34),s=n(55),u=n(54);function c(e){var t=a.compact(e);if(t.length)return function(e,n){return t.reduce(function(e,t){return t(e,n)},e)}}function f(e){return{transformScalarType:a.bindNullable(e.transformScalarType,e),transformEnumType:a.bindNullable(e.transformEnumType,e),transformInterfaceType:a.bindNullable(e.transformInterfaceType,e),transformInputObjectType:a.bindNullable(e.transformInputObjectType,e),transformUnionType:a.bindNullable(e.transformUnionType,e),transformObjectType:a.bindNullable(e.transformObjectType,e),transformDirective:a.bindNullable(e.transformDirective,e),transformField:a.bindNullable(e.transformField,e),transformInputField:a.bindNullable(e.transformInputField,e)}}t.bindTransformerFunctions=f,t.combineTransformers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.map(function(e){return f(e)});return{transformScalarType:c(n.map(function(e){return e.transformScalarType})),transformEnumType:c(n.map(function(e){return e.transformEnumType})),transformInterfaceType:c(n.map(function(e){return e.transformInterfaceType})),transformInputObjectType:c(n.map(function(e){return e.transformInputObjectType})),transformUnionType:c(n.map(function(e){return e.transformUnionType})),transformObjectType:c(n.map(function(e){return e.transformObjectType})),transformDirective:c(n.map(function(e){return e.transformDirective})),transformField:c(n.map(function(e){return e.transformField})),transformInputField:c(n.map(function(e){return e.transformInputField}))}},t.transformSchema=function(e,t){return new l(t,e).transform()};var l=function(){function e(e,t){this.transformers=e,this.schema=t,this.typeMap={}}return e.prototype.transform=function(){for(var e=this,t=this.schema,n=0,r=s.orderTypesTopologically(a.objectValues(t.getTypeMap()));n<r.length;n++){var c=r[n];this.processType(c)}var f=t.getDirectives().map(function(t){return o.isNativeDirective(t)?t:e.transformDirective(t,e.transformers)}),l=function(t){if(t)return e.findType(t.name)},p=l(t.getQueryType()),d=l(t.getMutationType()),h=l(t.getSubscriptionType()),y=a.compact([p,d,h]),m=a.objectValues(this.typeMap).filter(function(e){return e instanceof i.GraphQLObjectType}),v=u.filterUsableInterfaceImplementations(m,y);return new i.GraphQLSchema({directives:f,query:p,mutation:d,subscription:h,types:v})},e.prototype.findType=function(e){if(!(e in this.typeMap))throw new Error(\"Unexpected reference to type \"+e);return this.typeMap[e]},e.prototype.mapType=function(e){if(e instanceof i.GraphQLList)return new i.GraphQLList(this.mapType(e.ofType));if(e instanceof i.GraphQLNonNull)return new i.GraphQLNonNull(this.mapType(e.ofType));var t=e;return o.isNativeGraphQLType(t)?e:this.findType(t.name)},Object.defineProperty(e.prototype,\"transformationContext\",{get:function(){return{mapType:this.mapType.bind(this),findType:this.findType.bind(this),oldSchema:this.schema,copyType:this.copyType.bind(this)}},enumerable:!0,configurable:!0}),e.prototype.processType=function(e){\"__\"===e.name.substring(0,2)||o.isNativeGraphQLType(e)||(this.typeMap[e.name]=this.transformType(e))},e.prototype.transformType=function(e){return this.copyType(e,this.transformers)},e.prototype.copyType=function(e,t){if(e instanceof i.GraphQLScalarType)return this.transformScalarType(e,t);if(e instanceof i.GraphQLObjectType)return this.transformObjectType(e,t);if(e instanceof i.GraphQLInputObjectType)return this.transformInputObjectType(e,t);if(e instanceof i.GraphQLInterfaceType)return this.transformInterfaceType(e,t);if(e instanceof i.GraphQLUnionType)return this.transformUnionType(e,t);if(e instanceof i.GraphQLEnumType)return this.transformEnumType(e,t);throw new Error(\"Unsupported type: \"+e)},e.prototype.transformScalarType=function(e,t){var n={name:e.name,description:e.description,serialize:e.serialize.bind(e),parseLiteral:e.parseLiteral.bind(e),parseValue:e.parseValue.bind(e),astNode:e.astNode};return t.transformScalarType&&(n=t.transformScalarType(n,r({},this.transformationContext,{oldType:e}))),new i.GraphQLScalarType(n)},e.prototype.transformObjectType=function(e,t){var n=this,o={name:e.name,description:e.description,fields:function(){return n.transformFields(e.getFields(),r({},n.transformationContext,{oldOuterType:e,newOuterType:n.mapType(e)}),t)},interfaces:e.getInterfaces().map(function(e){return n.mapType(e)}),isTypeOf:e.isTypeOf,astNode:e.astNode};return t.transformObjectType&&(o=t.transformObjectType(o,r({},this.transformationContext,{oldType:e}))),new i.GraphQLObjectType(o)},e.prototype.transformInterfaceType=function(e,t){var n=this,o={name:e.name,description:e.description,resolveType:this.transformTypeResolver(e.resolveType,t),fields:function(){return n.transformFields(e.getFields(),{oldOuterType:e,newOuterType:n.mapType(e)},t)},astNode:e.astNode};return t.transformInterfaceType&&(o=t.transformInterfaceType(o,r({},this.transformationContext,{oldType:e}))),new i.GraphQLInterfaceType(o)},e.prototype.transformFields=function(e,t,n){var i={};for(var o in e){var a=e[o],s={name:o,description:a.description,deprecationReason:a.deprecationReason,type:this.mapType(a.type),args:this.transformArguments(a.args),resolve:a.resolve,astNode:a.astNode};if(n.transformField&&(s=n.transformField(s,r({},this.transformationContext,{oldField:a,oldOuterType:t.oldOuterType,newOuterType:t.newOuterType}))),s.name in i)throw new Error(\"Duplicate field name \"+s+\" in \"+t.oldOuterType.name);i[s.name]=s}return n.transformFields&&(i=n.transformFields(i,r({},this.transformationContext,{oldFields:e,oldOuterType:t.oldOuterType,newOuterType:t.newOuterType}))),i},e.prototype.transformArguments=function(e){for(var t={},n=0,r=e;n<r.length;n++){var i=r[n];t[i.name]={description:i.description,type:this.mapType(i.type),defaultValue:i.defaultValue,astNode:i.astNode}}return t},e.prototype.transformInputObjectType=function(e,t){var n=this,o={name:e.name,description:e.description,fields:function(){var i=e.getFields(),o={};for(var a in i){var s=i[a],u={name:a,description:s.description,defaultValue:s.defaultValue,type:n.mapType(s.type),astNode:s.astNode};if(t.transformInputField&&(u=t.transformInputField(u,r({},n.transformationContext,{oldField:s,oldOuterType:e,newOuterType:n.mapType(e)}))),u.name in o)throw new Error(\"Duplicate field name \"+u+\" in input type \"+e.name);o[u.name]=u}return o},astNode:e.astNode};return t.transformInputObjectType&&(o=t.transformInputObjectType(o,r({},this.transformationContext,{oldType:e}))),new i.GraphQLInputObjectType(o)},e.prototype.transformEnumType=function(e,t){for(var n={},o=0,a=e.getValues();o<a.length;o++){var s=a[o];n[s.name]={description:s.description,value:s.value,deprecationReason:s.deprecationReason,astNode:s.astNode}}var u={name:e.name,description:e.description,values:n,astNode:e.astNode};return t.transformEnumType&&(u=t.transformEnumType(u,r({},this.transformationContext,{oldType:e}))),new i.GraphQLEnumType(u)},e.prototype.transformUnionType=function(e,t){var n=this,o={name:e.name,description:e.description,types:e.getTypes().map(function(e){return n.mapType(e)}),resolveType:this.transformTypeResolver(e.resolveType,t),astNode:e.astNode};return t.transformUnionType&&(o=t.transformUnionType(o,r({},this.transformationContext,{oldType:e}))),new i.GraphQLUnionType(o)},e.prototype.transformDirective=function(e,t){var n={name:e.name,description:e.description,locations:e.locations,args:this.transformArguments(e.args),astNode:e.astNode};return t.transformDirective&&(n=t.transformDirective(n,r({},this.transformationContext,{oldDirective:e}))),new i.GraphQLDirective(n)},e.prototype.transformTypeResolver=function(e,t){var n=this;return e?function(t,r,o){var a=e(t,r,o);return\"string\"==typeof a?n.findType(a):a instanceof i.GraphQLObjectType?n.mapType(a):a.then(function(e){return\"string\"==typeof e?n.findType(e):n.mapType(e)})}:e},e}()},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(26);function i(e,t){return e.transformQuery&&(t=e.transformQuery(t)),t}function o(e,t){if(e.transformExtendedSchema&&(t=e.transformExtendedSchema(t)),e.transformSchema&&(t=t.withSchema(e.transformSchema(t.schema))),e.getSchemaTransformer){var n=e.getSchemaTransformer();n&&(t=r.transformExtendedSchema(t,n))}return t}t.runQueryPipelineModule=i,t.runQueryPipeline=function(e,t){return e.reduce(function(e,t){return i(t,e)},t)},t.runSchemaPipelineModule=o,t.runSchemaPipeline=function(e,t){return e.reduce(function(e,t){return o(t,e)},t)}},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,\"__esModule\",{value:!0});var i=n(58),o=n(33),a=n(32),s=n(52),u=n(51),c=n(31),f=n(47),l=n(29),p=n(44),d=n(43),h=n(42),y=n(39);var m=function(){function e(e,t,n){var i=this;this.endpoints=e;var l=e.map(function(e){return r({},e,{reportError:t,processQuery:function(t){return i.processQuery(t,e.endpointConfig.identifier)}})});this.preMergeModules=new Map(l.map(function(e){return[e.endpointConfig.identifier,function(e,t){var n=[];return e.endpointConfig.typePrefix&&n.push(new o.TypePrefixesModule(e.endpointConfig.typePrefix)),e.endpointConfig.namespace&&n.push(new a.NamespaceModule(e.endpointConfig.namespace)),t&&t.transformPreMergePipeline&&(n=t.transformPreMergePipeline(n,e)),[new f.ProxyResolversModule(e),new s.DefaultResolversModule,new y.ErrorResolversModule,new h.CustomScalarTypesSerializationModule,new u.AbstractTypesModule,new d.AdditionalMetadataModule(e.endpointConfig)].concat(n)}(e,n)]})),this.postMergeModules=function(e,t){var n=[new c.LinksModule({reportError:e.reportError})];return t&&t.transformPostMergePipeline&&(n=t.transformPostMergePipeline(n,e)),n.concat([new p.ExtendedIntrospectionModule,new y.ErrorResolversModule])}({endpoints:l,reportError:t},n)}return Object.defineProperty(e.prototype,\"schema\",{get:function(){return this._schema||(this._schema=this.createSchema()),this._schema},enumerable:!0,configurable:!0}),e.prototype.createSchema=function(){var e=this,t=this.endpoints.map(function(t){var n=t.schema;return i.runSchemaPipeline(e.preMergeModules.get(t.endpointConfig.identifier),n)}),n=l.mergeExtendedSchemas.apply(void 0,t);return i.runSchemaPipeline(this.postMergeModules,n)},e.prototype.processQuery=function(e,t){if(!this.preMergeModules.has(t))throw new Error(\"Endpoint \"+t+\" does not exist\");var n=this.preMergeModules.get(t);return i.runQueryPipeline(n.concat(this.postMergeModules).reverse(),e)},e}();t.Pipeline=m},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(35);var a=new((r=o)&&r.__esModule?r:{default:r}).default,s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=new(Function.prototype.bind.apply(Error,[null].concat(n)));i.name=this.constructor.name,this._defineProperty(\"error\",i)}return i(e,[{key:\"get\",value:function(e){return this._getProperty(\"error\")[e]}},{key:\"set\",value:function(e,t){this._getProperty(\"error\")[e]=t}},{key:\"_defineProperty\",value:function(e,t){var n=a.has(this)?a.get(this):{};n[e]=t,a.set(this,n)}},{key:\"_getProperty\",value:function(e,t){return a.has(this)?a.get(this)[e]:t}},{key:\"stack\",get:function(){return this._getProperty(\"error\").stack},set:function(e){this._getProperty(\"error\").stack=e}},{key:\"name\",get:function(){return this._getProperty(\"error\").name},set:function(e){this._getProperty(\"error\").name=e}},{key:\"message\",get:function(){return this._getProperty(\"error\").message},set:function(e){this._getProperty(\"error\").message=e}}]),i(e,[{key:\"toJSON\",value:function(){if(!e.searchPrototype)return{stack:this.stack,message:this.message,name:this.name};for(var t={},n=this,r=[n];n=Object.getPrototypeOf(n);)r.push(n);var i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,f=!0,l=!1,p=void 0;try{for(var d,h=Object.getOwnPropertyNames(c)[Symbol.iterator]();!(f=(d=h.next()).done);f=!0){var y=d.value;if(!t.hasOwnProperty(y)){var m=Object.getOwnPropertyDescriptor(c,y);if(m){var v=m.get?m.get.call(this):m.value;if(c.isPrototypeOf(v))continue;\"function\"!=typeof v&&(t[y]=v)}}}}catch(e){l=!0,p=e}finally{try{!f&&h.return&&h.return()}finally{if(l)throw p}}}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return t}}]),e}();s.searchPrototype=!1,t.default=s,Object.setPrototypeOf(s.prototype,Error.prototype)},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if(\"value\"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=a(n(60));function a(e){return e&&e.__esModule?e:{default:e}}var s=new(a(n(35)).default),u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,t);for(var n=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t}(this,Object.getPrototypeOf(t).call(this,e)),r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return n._defineProperty(\"causes\",i),n}return function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:\"serializeNonError\",value:function(e){try{return JSON.stringify(e,null,2)}catch(e){}return e}},{key:\"resolveStackFromError\",value:function(e){return e===this&&\"stack\"===t.globalStackProperty?i(Object.getPrototypeOf(t.prototype),\"stack\",this):e[t.globalStackProperty]}},{key:\"getLongStack\",value:function(){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=this.causes()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s instanceof t?e.push(s.getLongStack()):s instanceof Error?e.push(this.resolveStackFromError(s)):e.push(this.serializeNonError(s))}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var u=t.indent+e.join(\"\\n\").split(\"\\n\").join(\"\\n\"+t.indent);return(this.resolveStackFromError(this)+\"\\n\"+u).trim()}},{key:\"messages\",value:function(){var e=[i(Object.getPrototypeOf(t.prototype),\"message\",this)],n=!0,r=!1,o=void 0;try{for(var a,s=this.causes()[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value;u instanceof t?e=e.concat(u.messages()):u instanceof Error?e.push(u.message):e.push(u)}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return e}},{key:\"cause\",value:function(){var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this._getProperty(\"causes\",[])[e]}},{key:\"causes\",value:function(){return this._getProperty(\"causes\",[])}},{key:\"_defineProperty\",value:function(e,t){var n=s.has(this)?s.get(this):{};n[e]=t,s.set(this,n)}},{key:\"_getProperty\",value:function(e,t){return s.has(this)?s.get(this)[e]:t}},{key:\"stack\",get:function(){if(this._getProperty(\"useBase\"))return i(Object.getPrototypeOf(t.prototype),\"stack\",this);this._defineProperty(\"useBase\",!0);var e=this.getLongStack();return this._defineProperty(\"useBase\",!1),e}}]),t}();u.indent=\"    \",u.globalStackProperty=\"stack\",u.Exception=o.default,t.default=u},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9);t.findNodeInOtherDocument=function(e,t,n){var i=0,o=!1;if(r.visit(t,{enter:function(t){if(t==e)return o=!0,r.BREAK;i++}}),o){var a=void 0,s=0;if(r.visit(n,{enter:function(e){if(s==i)return a=e,r.BREAK;s++}}),!a||a.kind==e.kind)return a}}},function(e,t){e.exports=require(\"isobject\")},function(e,t){e.exports=require(\"isarray\")},function(e,t,n){\"use strict\";\n/**\n * line-column - Convert efficiently index to/from line-column in a string\n * @module  lineColumn\n * @license MIT\n */var r=n(64),i=n(63);Array.prototype.slice;function o(e,t){if(!(this instanceof o))return\"number\"==typeof t?new o(e).fromIndex(t):new o(e,t);this.str=e||\"\",this.lineToIndex=function(e){for(var t=e.split(\"\\n\"),n=new Array(t.length),r=0,i=0,o=t.length;i<o;i++)n[i]=r,r+=t[i].length+1;return n}(this.str),t=t||{},this.origin=void 0===t.origin?1:t.origin}e.exports=o,o.prototype.fromIndex=function(e){if(e<0||e>=this.str.length||isNaN(e))return null;var t=function(e,t){if(e>=t[t.length-1])return t.length-1;var n,r=0,i=t.length-2;for(;r<i;)if(e<t[n=r+(i-r>>1)])i=n-1;else{if(!(e>=t[n+1])){r=n;break}r=n+1}return r}(e,this.lineToIndex);return{line:t+this.origin,col:e-this.lineToIndex[t]+this.origin}},o.prototype.toIndex=function(e,t){if(void 0===t)return r(e)&&e.length>=2?this.toIndex(e[0],e[1]):i(e)&&\"line\"in e&&(\"col\"in e||\"column\"in e)?this.toIndex(e.line,\"col\"in e?e.col:e.column):-1;if(isNaN(e)||isNaN(t))return-1;if(e-=this.origin,t-=this.origin,e>=0&&t>=0&&e<this.lineToIndex.length){var n=this.lineToIndex[e];if(t<(e===this.lineToIndex.length-1?this.str.length:this.lineToIndex[e+1])-n)return n+t}return-1}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(9),i=n(65);t.findNodeAtLocation=function(e,t){var n,o,a=void 0;return r.visit(t,{enter:function(t){if(t.loc){if(void 0==n){if(o=t.loc.source,(n=function(e,t){return new i(t.body).toIndex({line:e.line,col:e.column})}(e,o))<0)return r.BREAK}else if(t.loc.source!=o)return r.BREAK;return t.loc&&t.loc.start>=n?(n<=t.loc.end&&(a=t),r.BREAK):void 0}}}),a}},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(37),i=n(27),o=function(){function e(){}return e.prototype.getEndpoint=function(e){if(function(e){return\"url\"in e}(e))return new r.HttpGraphQLClient({url:e.url});if(function(e){return\"schema\"in e}(e))return new i.LocalGraphQLClient(e.schema);if(function(e){return\"client\"in e}(e))return e.client;throw new Error(\"Unsupported endpoint config\")},e}();t.DefaultClientFactory=o},function(e,t,n){\"use strict\";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?\"return\":o[0]?\"throw\":\"next\"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var a=n(9),s=n(67),u=n(59),c=n(18),f=n(38),l=n(20),p=n(19),d=n(10),h=n(27),y=n(17),m=n(23),v=n(36),g=new s.DefaultClientFactory;function b(e){return i(this,void 0,void 0,function(){return o(this,function(t){return m.shouldContinueOnError(e.errorHandling)?[2,function(e){return i(this,void 0,void 0,function(){function t(e){n.push(e)}var n,i,s;return o(this,function(o){switch(o.label){case 0:return n=[],[4,w(e,t)];case 1:return i=o.sent(),s=i.schema.schema,m.shouldProvideErrorsInSchema(e.errorHandling)&&n.length&&(s=y.transformSchema(s,{transformFields:function(e,t){return t.oldOuterType==s.getQueryType()?r({},e,{_errors:{type:new a.GraphQLNonNull(new a.GraphQLList(new a.GraphQLNonNull(new a.GraphQLObjectType({name:\"_WeavingError\",fields:{message:{type:new a.GraphQLNonNull(a.GraphQLString)},endpoint:{type:a.GraphQLString}}})))),resolve:function(){return n.map(function(e){return{message:e.message,endpoint:e.endpointName}})}}}):e}})),[2,{schema:s,errors:n,hasErrors:n.length>0}]}})})}(e)]:[2,function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return[4,w(e,p.throwingErrorConsumer)];case 1:return t=n.sent(),[2,{schema:t.schema.schema,errors:[],hasErrors:!1}]}})})}(e)]})})}function w(e,t){return void 0===t&&(t=p.throwingErrorConsumer),i(this,void 0,void 0,function(){var n,r,s=this;return o(this,function(y){switch(y.label){case 0:return function(e){e.endpoints.forEach(function(e){!e.identifier&&e.namespace&&(e.identifier=e.namespace),e.identifier||(e.identifier=Math.random().toString(36).slice(2))})}(e),[4,Promise.all(e.endpoints.map(function(n){return i(s,void 0,void 0,function(){var r,s,u,d,y,b,w;return o(this,function(T){switch(T.label){case 0:r=g.getEndpoint(n),T.label=1;case 1:return T.trys.push([1,3,,4]),[4,function(e){return i(this,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return[4,e.execute(a.parse(a.introspectionQuery),{},void 0,!0)];case 1:t=r.sent(),n=l.assertSuccessfulResult(t);try{return[2,a.buildClientSchema(n)]}catch(e){throw new v(\"Failed to build schema from introspection result: \"+e.message,e)}return[2]}})})}(r)];case 2:return s=T.sent(),[3,4];case 3:return u=T.sent(),d=new p.WeavingError(\"Failed to retrieve schema: \"+u.message,n,u),t(d),m.shouldAddPlaceholdersOnError(e.errorHandling)&&n.namespace?[2,function(e,t){var n=function(e,t){return new a.GraphQLSchema({query:new a.GraphQLObjectType({description:\"Failed to fetch the schema for this endpoint. This type only exists to show the error message.\",name:e.typePrefix?\"Query\":\"Query_\"+e.identifier,fields:{_error:{type:a.GraphQLString,resolve:function(){return t.message}}}})})}(e,t);return{endpointConfig:e,client:new h.LocalGraphQLClient(n),schema:new c.ExtendedSchema(n)}}(n,d)]:[2,void 0];case 4:return T.trys.push([4,6,,7]),[4,f.fetchSchemaMetadata(r,s)];case 5:return y=T.sent(),[3,7];case 6:return b=T.sent(),t(new p.WeavingError(\"Failed to retrieve schema metadata: \"+b.message,n,b)),y=new c.SchemaMetadata,[3,7];case 7:return w=new c.ExtendedSchema(s,y),[2,{endpointConfig:n,client:r,schema:w}]}})})}))];case 1:return n=y.sent(),r=d.compact(n),[2,new u.Pipeline(r,t,e.pipelineConfig)]}})})}t.weaveSchemas=function(e){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,b(e)];case 1:return[2,t.sent().schema]}})})},t.weaveSchemasExt=b,t.createPipeline=w},function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(68);t.weaveSchemas=r.weaveSchemas,t.weaveSchemasExt=r.weaveSchemasExt,t.createProxySchema=r.weaveSchemas;var i=n(23);t.WeavingErrorHandlingMode=i.WeavingErrorHandlingMode;var o=n(19);t.WeavingError=o.WeavingError;var a=n(37);t.HttpGraphQLClient=a.HttpGraphQLClient;var s=n(27);t.LocalGraphQLClient=s.LocalGraphQLClient;var u=n(18);t.ExtendedSchema=u.ExtendedSchema,t.SchemaMetadata=u.SchemaMetadata;var c=n(22);t.EXTENDED_INTROSPECTION_FIELD=c.EXTENDED_INTROSPECTION_FIELD,t.getExtendedIntrospectionType=c.getExtendedIntrospectionType,t.getExtendedIntrospectionData=c.getExtendedIntrospectionData;var f=n(26);t.transformExtendedSchema=f.transformExtendedSchema;var l=n(17);t.transformSchema=l.transformSchema;var p=n(32);t.NamespaceModule=p.NamespaceModule;var d=n(33);t.TypePrefixesModule=d.TypePrefixesModule;var h=n(31);t.LinksModule=h.LinksModule}]);","extractedComments":[]}